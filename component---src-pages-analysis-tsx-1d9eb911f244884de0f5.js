"use strict";(self.webpackChunkpicapica_web_client=self.webpackChunkpicapica_web_client||[]).push([[67],{2503:function(e,t,n){n.d(t,{hu:function(){return m},__:function(){return l},Rk:function(){return u}});var c=n(7294),r=n(1513),s=n(6627);const o={en:{core_fulltext_languagenameenglish:{title:"CORE - The world's largest collection of open-access research papers"}},de:{core_fulltext_languagenameenglish:{title:"CORE - The world's largest collection of open-access research papers"}}},a={};var i=n(3097);function l(e){return c.createElement("span",{className:"Label"},e.icon&&c.createElement(i.fd,{kind:e.icon}),c.createElement("span",{className:"text"},e.text))}function u(){const e=(0,s.q)(d);return c.createElement(l,{icon:"upload",text:e.submittedFiles})}function m(e){const{urn:t,collection:n}=function(e){if("collection"in e)return{urn:r.f.parse(e.collection.urn),collection:e.collection};{var t;let n,c;if("string"==typeof e.collectionUrn){const t=r.f.tryParse(e.collectionUrn);if(!t||"collection"!==t.type)return{urn:void 0,collection:void 0};n=t,c=e.collectionUrn}else n=e.collectionUrn,c=r.f.stringify(n);return{urn:n,collection:null===(t=e.collections)||void 0===t?void 0:t.find((e=>e.urn===c))}}}(e),{title:i}=function(e){const t=(0,s.q)(o),n="string"==typeof e?r.f.tryParse(e):e;if(n&&"collection"===n.type){const e=t[n.collectionId];if(e)return e}return a}(t);return i?c.createElement(l,{text:i}):null!=n&&n.properties?c.createElement(l,{text:`${n.properties.name} - ${n.properties.description}`}):c.createElement(E,null)}function E(){const e=(0,s.q)(d);return c.createElement(l,{text:e.unknown})}const d={en:{submittedFiles:"Your submitted files",unknown:"Unknown"},de:{submittedFiles:"Ihre eingereichten Dateien",unknown:"Unbekannt"}}},840:function(e,t,n){n.d(t,{C:function(){return r}});var c=n(7294);function r({left:e,right:t,instruction:n}){return c.createElement("div",{className:"StepActionBar"},c.createElement("div",{className:"left"},c.createElement("div",null,e)),c.createElement("div",{className:"instruction"},n),c.createElement("div",{className:"right"},c.createElement("div",null,t)))}},6769:function(e,t,n){n.d(t,{aW:function(){return i},nh:function(){return u},xE:function(){return l}});var c=n(1082),r=n(7294),s=n(6627),o=n(4761),a=n(3097);function i({to:e}){const t=(0,s.q)(m).next;return r.createElement(c.rU,{to:e,className:`NextButton ${o.E.BUTTON}`,title:t},r.createElement("span",{className:"text"},t),r.createElement(a.fd,{kind:"next"}))}function l({to:e}){const t=(0,s.q)(m).back;return r.createElement(c.rU,{to:e,className:`BackButton ${o.E.BUTTON}`,title:t},r.createElement(a.fd,{kind:"back"}),r.createElement("span",{className:"text"},t))}function u({to:e}){const t=(0,s.q)(m).start;return r.createElement(c.rU,{to:e,className:`StartButton ${o.E.BUTTON} ${o.E.GREEN}`,title:t},r.createElement("span",{className:"text"},t),r.createElement(a.fd,{kind:"next"}))}const m={en:{next:"Next",back:"Back",start:"Start"},de:{next:"Weiter",back:"ZurÃ¼ck",start:"Start"}}},1878:function(e,t,n){n.d(t,{n0:function(){return p},Px:function(){return m}});var c=n(1082),r=n(7294),s=n(4831),o=n(6627),a=n(5461),i=n(4761);function l({heading:e,children:t}){return r.createElement("div",{className:"Group"},r.createElement("div",{className:"group-heading"},e),r.createElement("div",{className:"group-container"},t))}var u=n(3097);function m(e,t){switch(e){case"submit":return(0,s.me)({urn:t});case"analysis":return(0,s.sF)({urn:t});case"checkout":return"/checkout/";case"results":return(0,s.bq)({urn:t});default:(0,a.vE)(e)}}const E=["submit","analysis","checkout","results"],d={submit:"upload",analysis:"analyse",checkout:"checkout",results:"results"};function f({current:e,sessionUrn:t,disableOthers:n}){const s=(0,o.q)(h);return r.createElement("span",{className:`StepSelector ${i.E.BUTTON_GROUP}`},E.filter((e=>"checkout"!==e)).map((o=>{const a=s[o];return n&&o!==e?r.createElement("span",{key:o,className:`${i.E.BUTTON} ${i.E.DISABLED}`,title:a},r.createElement(u.fd,{kind:d[o]}),r.createElement("span",{className:"text"},a)):r.createElement(c.rU,{key:o,to:m(o,t),className:`${i.E.BUTTON}${o===e?" "+i.E.ACTIVE:""}`,title:a},r.createElement(u.fd,{kind:d[o]}),r.createElement("span",{className:"text"},a))})))}function p({current:e,sessionUrn:t,disableOthers:n,children:c}){return r.createElement("div",{className:"StepSelectorGroup"},r.createElement(l,{heading:r.createElement("div",{className:"heading-wrapper"},r.createElement(f,{current:e,sessionUrn:t,disableOthers:n}))},c))}const h={en:{submit:"Upload",analysis:"Analysis",checkout:"Checkout",results:"Results"},de:{submit:"Hochladen",analysis:"Analyse",checkout:"Kasse",results:"Ergebnisse"}}},3252:function(e,t,n){n.d(t,{PT:function(){return s},jD:function(){return o},ww:function(){return a}});var c=n(603),r=n(495);function s(e,t){const n=new c.DeleteItemRequest;return n.setSessionUrn(e.urn),n.setItemUrn(t),{request:n,mutate(e){const n=(0,r.R3)(e);return n.itemsList=n.itemsList.filter((e=>e.urn!==t)),n}}}function o(e,t,n){const s=n.toObject(),o=new c.UpdateItemRequest;return o.setSessionUrn(e.urn),o.setItemUrn(t),o.setMeta(n),{request:o,mutate(e){const n=(0,r.R3)(e),c=n.itemsList.find((e=>e.urn===t));return c&&(c.meta=s),n}}}function a(e,t){const n=t.getResourcePairs(),s=n.map((e=>e.toObject())),o=new c.UpdateComparisonSetRequest;return o.setSessionUrn(e.urn),o.setComparisonsList(n),{request:o,mutate(e){const t=(0,r.R3)(e);return t.comparisonsList=s,t}}}},495:function(e,t,n){function c(e){return JSON.parse(JSON.stringify(e))}function r(){const e=Date.now();return{seconds:Math.floor(e/1e3),nanos:e%1e3*1e7}}function s(e,t){return e.seconds===t.seconds?e.nanos-t.nanos:e.seconds-t.seconds}function o(e){return[...e].sort(((e,t)=>{const n=e.createdAt,c=t.createdAt;return n||c?n?c?s(n,c)||e.urn.localeCompare(t.urn):1:-1:0}))}n.d(t,{R3:function(){return c},VN:function(){return r},a$:function(){return o},pv:function(){return s}})},4141:function(e,t,n){n.d(t,{b:function(){return l}});var c=n(7294),r=n(6006),s=n(5461),o=n(1513);class a{constructor(e,t,n){this.groupA=e,this.groupB=t,this.collections=n}withGroupA(e){return new a(e,this.groupB,this.collections)}withGroupB(e){return new a(this.groupA,e,this.collections)}withCollections(e){return new a(this.groupA,this.groupB,e)}withCollection(e,t){const n=new Map(this.collections);return n.set(e,t),this.withCollections(n)}static fromResourcePairs(e,t){const n=new Set,c=new Set,s=new Map;function o(e,t){let n=s.get(e);void 0===n&&(n=new Set,s.set(e,n)),n.add(t)}function l(e){const n=i(e);return"item"===n?[e]:"session"===n?t:[]}for(const a of e){const[e,t]=a instanceof r.ResourcePair?[a.getUrnA(),a.getUrnB()]:[a.urnA,a.urnB],s=i(e),u=i(t);"collection"!==s?"collection"!==u?(l(e).forEach((e=>n.add(e))),l(t).forEach((e=>c.add(e)))):l(e).forEach((e=>o(t,e))):l(t).forEach((t=>o(e,t)))}return new a(n,c,s)}getResourcePairs(){const e=[],t=new Set,n=new Set;for(const c of this.groupA)for(const s of this.groupB)c===s||(t.add(c),n.add(s),e.push((new r.ResourcePair).setUrnA(c).setUrnB(s)));for(const c of this.groupA)t.has(c)||e.push((new r.ResourcePair).setUrnA(c).setUrnB(o.s));for(const c of this.groupB)n.has(c)||e.push((new r.ResourcePair).setUrnA(o.s).setUrnB(c));for(const[c,s]of this.collections)for(const t of s)e.push((new r.ResourcePair).setUrnA(c).setUrnB(t));return e}}function i(e){try{return o.f.parse(e).type}catch(t){return}}function l(e){return(0,c.useMemo)((()=>{var t;return"Ready"===e.type?a.fromResourcePairs(null!==(t=e.session.comparisonsList)&&void 0!==t?t:s.LZ,e.session.itemsList.map((e=>e.urn))):a.EMPTY}),[e])}(a||(a={})).EMPTY=new a(s.a4,s.a4,s.wO)},7339:function(e,t,n){n.d(t,{b:function(){return o}});var c=n(3467),r=n(603),s=n(693);function o(e){return[(0,c.useQuery)(["collections",e],{refetchInterval:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,queryFn:async()=>{const t=new r.GetCollectionsRequest;t.setSessionUrn(e);return(await(0,s.M)().getCollections(t,null)).toObject().collectionsList}}).data]}},3870:function(e,t,n){n.r(t),n.d(t,{Head:function(){return k}});var c=n(7294),r=n(4761),s=n(3097),o=n(2503),a=n(6208),i=n(7601),l=n(8252),u=n(840),m=n(6769),E=n(1878),d=n(6006),f=n(9067),p=n(3252),h=n(693),N=n(495),T=n(4141),v=n(7339),w=n(6627),g=n(4918),U=n(5461);const k=()=>c.createElement(c.Fragment,null,c.createElement("title",null,"Picapica"),c.createElement("meta",{name:"robots",content:"noindex"}),c.createElement(l.s,null));function B({session:e,config:t,update:n}){const a=(0,w.q)(b),i=(0,N.a$)(e.itemsList),l=i.map((e=>e.urn)),u=l.every((e=>t.groupA.has(e))),m=l.every((e=>t.groupB.has(e))),E=u&&m,f=l.every((e=>!t.groupA.has(e)&&!t.groupB.has(e))),p="inactive";return c.createElement("div",{className:"ItemConfig"},c.createElement("div",{className:"heading"},c.createElement("span",{className:"title"},c.createElement(o.Rk,null)),c.createElement("span",{className:"buttons"},c.createElement("span",{className:r.E.BUTTON_GROUP},c.createElement("button",{className:`${r.E.BUTTON} ${E?r.E.ACTIVE:p}`,onClick:function(){const e=t.withGroupA(new Set(l)).withGroupB(new Set(l));n(e)}},a.all),c.createElement("button",{className:`${r.E.BUTTON} ${f?r.E.ACTIVE:p}`,onClick:function(){const e=t.withGroupA(U.a4).withGroupB(U.a4);n(e)}},a.none)))),c.createElement("div",{className:"content"},c.createElement("div",{className:"instruction"},a.itemInstruction),c.createElement("div",{className:"table"},c.createElement("div",{className:r.E.BUTTON_GROUP},c.createElement("span",{className:r.E.NON_BUTTON},a.file),c.createElement("button",{className:`${r.E.BUTTON} ${u?r.E.ACTIVE:p}`,onClick:function(){const e=t.withGroupA(new Set(l));n(e)}},"A"),c.createElement("button",{className:`${r.E.BUTTON} ${m?r.E.ACTIVE:p}`,onClick:function(){const e=t.withGroupB(new Set(l));n(e)}},"B")),i.map((e=>{var o,a,i;const l=t.groupA.has(e.urn),u=t.groupB.has(e.urn);return c.createElement("div",{key:e.urn,className:r.E.BUTTON_GROUP},c.createElement("span",{className:r.E.NON_BUTTON},c.createElement(s.wy,{type:null!==(o=null===(a=e.resource)||void 0===a?void 0:a.type)&&void 0!==o?o:d.Item.Resource.Type.TYPE_UNSPECIFIED}),null===(i=e.meta)||void 0===i?void 0:i.name),c.createElement("button",{className:`${r.E.BUTTON} ${l?r.E.ACTIVE:p}`,onClick:()=>function(e){const c=t.withGroupA(y(t.groupA,e));n(c)}(e.urn)},"A"),c.createElement("button",{className:`${r.E.BUTTON} ${u?r.E.ACTIVE:p}`,onClick:()=>function(e){const c=t.withGroupB(y(t.groupB,e));n(c)}(e.urn)},"B"))})))))}function C({session:e,config:t,collections:n,update:s}){const o=(0,w.q)(b),a=e.itemsList.map((e=>e.urn)),i=n.every((e=>{var n;const c=null!==(n=t.collections.get(e.urn))&&void 0!==n?n:U.a4;return a.every((e=>c.has(e)))})),l=n.every((e=>{var n;const c=null!==(n=t.collections.get(e.urn))&&void 0!==n?n:U.a4;return a.every((e=>!c.has(e)))})),u="inactive";return c.createElement("div",{className:"CollectionsConfig"},c.createElement("div",{className:"heading"},c.createElement("span",{className:"title"},o.collections),c.createElement("span",{className:"buttons"},c.createElement("span",{className:r.E.BUTTON_GROUP},c.createElement("button",{className:`${r.E.BUTTON} ${i?r.E.ACTIVE:u}`,onClick:function(){const e=new Set(a),c=t.withCollections(new Map(n.map((t=>[t.urn,e]))));s(c)}},o.all),c.createElement("button",{className:`${r.E.BUTTON} ${l?r.E.ACTIVE:u}`,onClick:function(){const e=t.withCollections(new Map(n.map((e=>[e.urn,U.a4]))));s(e)}},o.none)))),c.createElement("div",{className:"content"},c.createElement("div",{className:"instruction"},o.collectionsInstruction),n.map((n=>c.createElement(O,{key:n.urn,session:e,collection:n,config:t,update:s})))))}function O({session:e,config:t,collection:n,update:a}){var i;const l=(0,w.q)(b),u=null!==(i=t.collections.get(n.urn))&&void 0!==i?i:U.a4,m=(0,N.a$)(e.itemsList),E=m.map((e=>e.urn)),f=E.every((e=>u.has(e))),p=E.every((e=>!u.has(e))),h="inactive";function T(e){const c=t.withCollection(n.urn,y(u,e));a(c)}return c.createElement("div",{className:"CollectionConfig"},c.createElement("div",{className:"collection-label"},c.createElement(o.hu,{collectionUrn:n.urn})),c.createElement("div",{className:"table"},c.createElement("div",{className:r.E.BUTTON_GROUP},c.createElement("span",{className:r.E.NON_BUTTON},l.file),c.createElement("button",{className:`${r.E.BUTTON} ${f?r.E.ACTIVE:h}`,onClick:function(){const e=t.withCollection(n.urn,new Set(E));a(e)}},c.createElement(s.JO,{kind:"check-line"})),c.createElement("button",{className:`${r.E.BUTTON} ${p?r.E.ACTIVE:h}`,onClick:function(){const e=t.withCollection(n.urn,U.a4);a(e)}},c.createElement(s.JO,{kind:"close-line"}))),m.map((e=>{var t,n,o;const a=u.has(e.urn);return c.createElement("div",{key:e.urn,className:r.E.BUTTON_GROUP},c.createElement("span",{className:r.E.NON_BUTTON},c.createElement(s.wy,{type:null!==(t=null===(n=e.resource)||void 0===n?void 0:n.type)&&void 0!==t?t:d.Item.Resource.Type.TYPE_UNSPECIFIED}),null===(o=e.meta)||void 0===o?void 0:o.name),c.createElement("button",{className:`${r.E.BUTTON} ${a?r.E.ACTIVE:h}`,onClick:()=>T(e.urn)},c.createElement(s.JO,{kind:"check-line"})),c.createElement("button",{className:`${r.E.BUTTON} ${a?h:r.E.ACTIVE}`,onClick:()=>T(e.urn)},c.createElement(s.JO,{kind:"close-line"})))}))))}function y(e,t){const n=new Set(e);return e.has(t)?n.delete(t):n.add(t),n}t.default=(0,f.kj)((function(){const e=(0,w.q)(b),[t,n]=(0,g.zU)(),[r]=(0,v.b)((0,g.PK)(t)),s=(0,c.useCallback)((e=>{if("Ready"===t.type){const{mutate:c,request:r}=(0,p.ww)(t.session,e);n((0,h.M)().updateComparisonSet(r,null).then(U.ZT),c)}}),[t,n]),o=(0,T.b)(t);return c.createElement(a.T,{className:"Analysis",title:e.title,header:"small"},c.createElement(E.n0,{sessionUrn:(0,g.PK)(t),current:"analysis"},c.createElement(i.sM,{state:t,onReady:({session:t})=>c.createElement(c.Fragment,null,c.createElement(u.C,{left:c.createElement(m.xE,{to:(0,E.Px)("submit",t.urn)}),right:c.createElement(m.nh,{to:(0,E.Px)("results",t.urn)}),instruction:e.instruction}),c.createElement(B,{session:t,config:o,update:s}),r&&r.length>0&&c.createElement(C,{session:t,collections:r,config:o,update:s}),c.createElement(u.C,{left:c.createElement(m.xE,{to:(0,E.Px)("submit",t.urn)}),right:c.createElement(m.nh,{to:(0,E.Px)("results",t.urn)}),instruction:""}))})))}));const b={en:{title:"Analysis - Picapica",instruction:"Select analysis options",all:"All",none:"None",file:"File",collections:"Document collections",itemInstruction:"Compare your submitted files among each other. Group A will be compared with Group B.",collectionsInstruction:"Compare your submitted files with our indexed document collection."},de:{title:"Analyse - Picapica",instruction:"Analyseoptionen auswÃ¤hlen",all:"Alles",none:"Nichts",file:"Datei",collections:"Dokumentensammlungen",itemInstruction:"Vergleichen Sie Ihre eingereichten Dateien miteinander. Gruppe A wird mit Gruppe B verglichen.",collectionsInstruction:"Vergleichen Sie Ihre eingereichten Dateien mit underen indexierten Dokumentensammlungen."}}}}]);
//# sourceMappingURL=component---src-pages-analysis-tsx-1d9eb911f244884de0f5.js.map