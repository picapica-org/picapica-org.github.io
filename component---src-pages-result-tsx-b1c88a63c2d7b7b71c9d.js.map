{"version":3,"file":"component---src-pages-result-tsx-b1c88a63c2d7b7b71c9d.js","mappings":"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","sources":["webpack://picapica-web-client/./src/elements/center-align-two.tsx","webpack://picapica-web-client/./src/lib/use-collection-localization.ts","webpack://picapica-web-client/./src/elements/labels.tsx","webpack://picapica-web-client/./src/elements/loader-animation.tsx","webpack://picapica-web-client/./src/lib/session/result-categories.ts","webpack://picapica-web-client/./src/elements/badge.tsx","webpack://picapica-web-client/./src/elements/results-overview.tsx","webpack://picapica-web-client/./src/lib/use-collection-document.ts","webpack://picapica-web-client/./src/lib/lru-cache.ts","webpack://picapica-web-client/./src/lib/use-alignment.ts","webpack://picapica-web-client/./src/elements/alignment-view.tsx","webpack://picapica-web-client/./src/lib/use-result-text.ts","webpack://picapica-web-client/./src/pages/result.tsx"],"sourcesContent":["import React from \"react\";\nimport \"./center-align-two.scss\";\n\nexport interface CenterAlignTwoProps {\n\treadonly className?: string;\n\treadonly grow: \"left\" | \"right\";\n\treadonly left: React.ReactNode;\n\treadonly right: React.ReactNode;\n}\n\nexport function CenterAlignTwo({ className, grow, left, right }: CenterAlignTwoProps): JSX.Element {\n\treturn (\n\t\t<div className={\"CenterAlignTwo\" + (className ? \" \" + className : \"\")}>\n\t\t\t<div className={`left${grow === \"left\" ? \" grow\" : \"\"}`}>{left}</div>\n\t\t\t<div className={`right${grow === \"right\" ? \" grow\" : \"\"}`}>{right}</div>\n\t\t</div>\n\t);\n}\n","import { Locales } from \"./localization\";\nimport { PicapicaUrn } from \"./session/urn\";\nimport { useLocalization } from \"./use-localization\";\n\nexport interface CollectionLocalization {\n\treadonly title: string;\n}\n\ntype KnownCollections = \"core_fulltext_languagenameenglish\";\n\nconst knownCollections: Locales<Record<KnownCollections, CollectionLocalization>> = {\n\ten: {\n\t\tcore_fulltext_languagenameenglish: {\n\t\t\ttitle: \"CORE - The world's largest collection of open-access research papers\",\n\t\t},\n\t},\n\tde: {\n\t\tcore_fulltext_languagenameenglish: {\n\t\t\ttitle: \"CORE - The world's largest collection of open-access research papers\",\n\t\t},\n\t},\n};\n\nconst EMPTY_OBJ = {};\n\nexport function useCollectionLocalization(\n\turn: PicapicaUrn | string | undefined | null\n): Partial<CollectionLocalization> {\n\tconst l: Readonly<Record<string, CollectionLocalization | undefined>> = useLocalization(knownCollections);\n\n\tconst parsed = typeof urn === \"string\" ? PicapicaUrn.tryParse(urn) : urn;\n\tif (parsed && parsed.type === \"collection\") {\n\t\tconst known = l[parsed.collectionId];\n\t\tif (known) {\n\t\t\treturn known;\n\t\t}\n\t}\n\n\treturn EMPTY_OBJ;\n}\n","import React from \"react\";\nimport { Collection } from \"../lib/generated/v1/types_pb\";\nimport { Locales, SimpleString } from \"../lib/localization\";\nimport { PicapicaCollectionUrn, PicapicaUrn, Urn } from \"../lib/session/urn\";\nimport { useCollectionLocalization } from \"../lib/use-collection-localization\";\nimport { useLocalization } from \"../lib/use-localization\";\nimport { DeepReadonly } from \"../lib/util\";\nimport { PicaIcon, PicaIconKind } from \"./icon\";\nimport \"./labels.scss\";\n\nexport interface LabelProps {\n\treadonly icon?: PicaIconKind;\n\treadonly text: string;\n}\n\nexport function Label(props: LabelProps): JSX.Element {\n\treturn (\n\t\t<span className=\"Label\">\n\t\t\t{props.icon && <PicaIcon kind={props.icon} />}\n\t\t\t<span className=\"text\">{props.text}</span>\n\t\t</span>\n\t);\n}\n\nexport function SubmittedFilesLabel(): JSX.Element {\n\tconst l = useLocalization(locales);\n\treturn <Label icon=\"upload\" text={l.submittedFiles} />;\n}\n\nexport type CollectionProps =\n\t| {\n\t\t\treadonly collectionUrn: string | PicapicaCollectionUrn;\n\t\t\treadonly collections?: DeepReadonly<Collection.AsObject[]>;\n\t  }\n\t| {\n\t\t\treadonly collection: DeepReadonly<Collection.AsObject>;\n\t  };\n\nexport function CollectionLabel(props: CollectionProps): JSX.Element {\n\tconst { urn, collection } = processProps(props);\n\tconst { title } = useCollectionLocalization(urn);\n\n\tif (title) {\n\t\treturn <Label text={title} />;\n\t} else if (collection?.properties) {\n\t\treturn <Label text={`${collection.properties.name} - ${collection.properties.description}`} />;\n\t} else {\n\t\treturn <UnknownCollectionLabel />;\n\t}\n}\ninterface ProcessedProps {\n\turn: PicapicaCollectionUrn | undefined;\n\tcollection: DeepReadonly<Collection.AsObject> | undefined;\n}\nfunction processProps(props: CollectionProps): ProcessedProps {\n\tif (\"collection\" in props) {\n\t\treturn {\n\t\t\turn: PicapicaUrn.parse(props.collection.urn as Urn<\"collection\">),\n\t\t\tcollection: props.collection,\n\t\t};\n\t} else {\n\t\tlet urn: PicapicaCollectionUrn;\n\t\tlet urnString: string;\n\t\tif (typeof props.collectionUrn === \"string\") {\n\t\t\tconst parsed = PicapicaUrn.tryParse(props.collectionUrn);\n\t\t\tif (!parsed || parsed.type !== \"collection\") {\n\t\t\t\treturn { urn: undefined, collection: undefined };\n\t\t\t}\n\t\t\turn = parsed;\n\t\t\turnString = props.collectionUrn;\n\t\t} else {\n\t\t\turn = props.collectionUrn;\n\t\t\turnString = PicapicaUrn.stringify(urn);\n\t\t}\n\n\t\tconst collection = props.collections?.find(c => c.urn === urnString);\n\n\t\treturn { urn, collection };\n\t}\n}\n\nfunction UnknownCollectionLabel(): JSX.Element {\n\tconst l = useLocalization(locales);\n\treturn <Label text={l.unknown} />;\n}\n\nconst locales: Locales<SimpleString<\"submittedFiles\" | \"unknown\">> = {\n\ten: {\n\t\tsubmittedFiles: \"Your submitted files\",\n\t\tunknown: \"Unknown\",\n\t},\n\tde: {\n\t\tsubmittedFiles: \"Ihre eingereichten Dateien\",\n\t\tunknown: \"Unbekannt\",\n\t},\n};\n","import React from \"react\";\nimport { Icon } from \"./icon\";\nimport \"./loader-animation.scss\";\n\nexport interface LoaderAnimationProps {\n\treadonly id?: string;\n}\n\nexport function LoaderAnimation({ id }: LoaderAnimationProps): JSX.Element {\n\treturn (\n\t\t<span className=\"LoaderAnimation\" id={id}>\n\t\t\t{\" \"}\n\t\t\t<Icon kind=\"loader-5-line\" />\n\t\t\t<Icon kind=\"loader-5-line\" />\n\t\t</span>\n\t);\n}\n","import { Result } from \"../generated/v1/types_pb\";\nimport { DeepReadonly } from \"../util\";\nimport { PicapicaDocumentUrn, PicapicaItemUrn, PicapicaUrn, Urn } from \"./urn\";\n\nexport interface ItemResult {\n\treadonly a: PicapicaItemUrn;\n\treadonly b: PicapicaItemUrn;\n\treadonly result: DeepReadonly<Result.AsObject>;\n}\nexport interface CollectionResult {\n\treadonly item: PicapicaItemUrn;\n\treadonly document: PicapicaDocumentUrn;\n\treadonly result: DeepReadonly<Result.AsObject>;\n}\n\nexport interface ResultCategories {\n\t/**\n\t * A list of all results between items.\n\t */\n\titems: ItemResult[];\n\t/**\n\t * A map from a collections URN to a non-empty list of results between an item and a document from key collection.\n\t */\n\tcollections: Map<Urn<\"collection\">, CollectionResult[]>;\n\t/**\n\t * A list of results that are invalid by not having valid URNs.\n\t */\n\tinvalid: DeepReadonly<Result.AsObject>[];\n}\n\nexport function categorizeResults(results: Iterable<DeepReadonly<Result.AsObject>>): ResultCategories {\n\tconst categories: ResultCategories = { items: [], collections: new Map(), invalid: [] };\n\n\tfunction addDocument(\n\t\titem: PicapicaItemUrn,\n\t\tdocument: PicapicaDocumentUrn,\n\t\tresult: DeepReadonly<Result.AsObject>\n\t): void {\n\t\tconst collectionUrn = PicapicaUrn.stringify({ type: \"collection\", collectionId: document.collectionId });\n\n\t\tlet list = categories.collections.get(collectionUrn);\n\t\tif (list === undefined) {\n\t\t\tlist = [];\n\t\t\tcategories.collections.set(collectionUrn, list);\n\t\t}\n\t\tlist.push({ item, document, result });\n\t}\n\n\tfor (const result of results) {\n\t\tconst a = PicapicaUrn.tryParse(result.resources?.urnA ?? \"\");\n\t\tconst b = PicapicaUrn.tryParse(result.resources?.urnB ?? \"\");\n\n\t\tif (!a || !b) {\n\t\t\tcategories.invalid.push(result);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (a.type === \"item\" && b.type === \"item\") {\n\t\t\tcategories.items.push({ a, b, result });\n\t\t} else if (a.type === \"item\" && b.type === \"document\") {\n\t\t\taddDocument(a, b, result);\n\t\t} else if (a.type === \"document\" && b.type === \"item\") {\n\t\t\taddDocument(b, a, result);\n\t\t} else {\n\t\t\tcategories.invalid.push(result);\n\t\t}\n\t}\n\n\treturn categories;\n}\n","import React from \"react\";\nimport \"./badge.scss\";\n\nexport type BadgeKind = \"Dark\" | \"Light\";\n\nexport interface BadgeProps {\n\treadonly kind: BadgeKind;\n}\n\nexport function Badge({ kind, children }: React.PropsWithChildren<BadgeProps>): JSX.Element {\n\treturn <span className={`Badge ${kind}`}>{children}</span>;\n}\n","import { Link } from \"gatsby\";\nimport React from \"react\";\nimport { Session } from \"../lib/generated/v1/services_pb\";\nimport { Collection, Result } from \"../lib/generated/v1/types_pb\";\nimport { Locales, SimpleString } from \"../lib/localization\";\nimport { categorizeResults, CollectionResult } from \"../lib/session/result-categories\";\nimport { PicapicaUrn, Urn } from \"../lib/session/urn\";\nimport { useCollectionDocument, usePreloadCollectionDocuments } from \"../lib/use-collection-document\";\nimport { useLocalization } from \"../lib/use-localization\";\nimport { DeepReadonly } from \"../lib/util\";\nimport { Badge } from \"./badge\";\nimport { Buttons } from \"./buttons\";\nimport { CenterAlignTwo } from \"./center-align-two\";\nimport { PicaIcon } from \"./icon\";\nimport { CollectionLabel, Label, SubmittedFilesLabel } from \"./labels\";\nimport { LoaderAnimation } from \"./loader-animation\";\nimport \"./results-overview.scss\";\n\nexport interface OverviewContainerProps {\n\treadonly backTo?: string;\n\treadonly title: React.ReactNode;\n}\n\nexport function OverviewContainer({\n\tbackTo,\n\ttitle,\n\tchildren,\n}: React.PropsWithChildren<OverviewContainerProps>): JSX.Element {\n\tconst l = useLocalization(locales);\n\n\treturn (\n\t\t<div className=\"OverviewContainer\">\n\t\t\t<div className=\"head\">\n\t\t\t\t{backTo && (\n\t\t\t\t\t<Link className={Buttons.BUTTON} to={backTo} title={l.back}>\n\t\t\t\t\t\t<PicaIcon kind=\"back\" />\n\t\t\t\t\t</Link>\n\t\t\t\t)}\n\t\t\t\t<div>{title}</div>\n\t\t\t</div>\n\t\t\t<div className=\"content\">{children}</div>\n\t\t</div>\n\t);\n}\n\nexport interface ResultsOverviewProps {\n\treadonly session: DeepReadonly<Session.AsObject>;\n\treadonly collections?: DeepReadonly<Collection.AsObject[]>;\n\treadonly selectedCollections: readonly Urn<\"collection\">[];\n\treadonly backTo: string;\n\treadonly itemTo: string;\n\treadonly collectionTo: (collectionUrn: string) => string;\n}\n\nexport function ResultsOverview({\n\tsession,\n\tcollections,\n\tselectedCollections,\n\tbackTo,\n\titemTo,\n\tcollectionTo,\n}: ResultsOverviewProps): JSX.Element {\n\tconst l = useLocalization(locales);\n\n\tconst categories = categorizeResults(session.resultsList);\n\n\t// add selected collections\n\tfor (const collection of selectedCollections) {\n\t\tcategories.collections.set(collection, categories.collections.get(collection) ?? []);\n\t}\n\n\tif (categories.invalid.length) {\n\t\tconsole.error(\"Not displaying the following results:\");\n\t\tconsole.error(categories.invalid);\n\t}\n\n\tconst title = (\n\t\t<CenterAlignTwo\n\t\t\tgrow=\"left\"\n\t\t\tleft={<Label icon=\"results\" text={l.analysisResults} />}\n\t\t\tright={<Badge kind=\"Dark\">{l.results}</Badge>}\n\t\t/>\n\t);\n\n\tconst running = session.status === Session.ComputeStatus.STATUS_RUNNING;\n\n\treturn (\n\t\t<div className=\"ResultsOverview\">\n\t\t\t<OverviewContainer backTo={backTo} title={title}>\n\t\t\t\t<div>\n\t\t\t\t\t<Link className={Buttons.BUTTON} to={itemTo}>\n\t\t\t\t\t\t<CenterAlignTwo\n\t\t\t\t\t\t\tgrow=\"left\"\n\t\t\t\t\t\t\tleft={<SubmittedFilesLabel />}\n\t\t\t\t\t\t\tright={\n\t\t\t\t\t\t\t\t<Badge kind=\"Light\">\n\t\t\t\t\t\t\t\t\t{running && <LoaderAnimation />}\n\t\t\t\t\t\t\t\t\t{categories.items.length}\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t{[...categories.collections].map(([urn, results]) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={urn}>\n\t\t\t\t\t\t\t<PreloadDocument sessionUrn={session.urn} results={results} />\n\t\t\t\t\t\t\t<Link className={Buttons.BUTTON} to={collectionTo(urn)}>\n\t\t\t\t\t\t\t\t<CenterAlignTwo\n\t\t\t\t\t\t\t\t\tgrow=\"left\"\n\t\t\t\t\t\t\t\t\tleft={<CollectionLabel collectionUrn={urn} collections={collections} />}\n\t\t\t\t\t\t\t\t\tright={<Badge kind=\"Light\">{results.length}</Badge>}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</OverviewContainer>\n\t\t</div>\n\t);\n}\n\nfunction PreloadDocument({ sessionUrn, results }: { sessionUrn: string; results: CollectionResult[] }): JSX.Element {\n\tusePreloadCollectionDocuments(\n\t\tsessionUrn,\n\t\tresults.map(r => PicapicaUrn.stringify(r.document))\n\t);\n\treturn <></>;\n}\n\nexport interface ItemResultsOverviewProps {\n\treadonly session: DeepReadonly<Session.AsObject>;\n\treadonly backTo: string;\n\treadonly resultTo: (result: DeepReadonly<Result.AsObject>) => string;\n}\n\nexport function ItemResultsOverview({ session, backTo, resultTo }: ItemResultsOverviewProps): JSX.Element {\n\tconst l = useLocalization(locales);\n\n\tconst { items } = categorizeResults(session.resultsList);\n\n\tconst title = (\n\t\t<CenterAlignTwo grow=\"left\" left={<SubmittedFilesLabel />} right={<Badge kind=\"Dark\">{l.matches}</Badge>} />\n\t);\n\n\tconst itemNameMap = new Map(session.itemsList.map(item => [item.urn, item.meta?.name]));\n\n\treturn (\n\t\t<div className=\"ItemResultsOverview\">\n\t\t\t<OverviewContainer backTo={backTo} title={title}>\n\t\t\t\t{items.map(({ result }) => {\n\t\t\t\t\tconst leftName = itemNameMap.get(result.resources?.urnA ?? \"\") ?? l.unknownItem;\n\t\t\t\t\tconst rightName = itemNameMap.get(result.resources?.urnB ?? \"\") ?? l.unknownItem;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={result.urn}>\n\t\t\t\t\t\t\t<Link className={Buttons.BUTTON} to={resultTo(result)}>\n\t\t\t\t\t\t\t\t<CenterAlignTwo\n\t\t\t\t\t\t\t\t\tgrow=\"left\"\n\t\t\t\t\t\t\t\t\tleft={\n\t\t\t\t\t\t\t\t\t\t<span className=\"item-vs\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"left\">{leftName}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"vs\">vs.</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"right\">{rightName}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tright={\n\t\t\t\t\t\t\t\t\t\tsession.status === Session.ComputeStatus.STATUS_COMPLETED ? (\n\t\t\t\t\t\t\t\t\t\t\t<Badge kind=\"Light\">{result.seedsList.length}</Badge>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<LoaderAnimation />\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\n\t\t\t\t{items.length === 0 && <div className=\"no-results\">{l.noResults}</div>}\n\t\t\t</OverviewContainer>\n\t\t</div>\n\t);\n}\n\nexport interface CollectionResultsOverviewProps {\n\treadonly collectionUrn: string;\n\treadonly session: DeepReadonly<Session.AsObject>;\n\treadonly collections?: DeepReadonly<Collection.AsObject[]>;\n\treadonly backTo: string;\n\treadonly resultTo: (result: DeepReadonly<Result.AsObject>) => string;\n}\n\nexport function CollectionResultsOverview({\n\tsession,\n\tcollectionUrn,\n\tcollections,\n\tbackTo,\n\tresultTo,\n}: CollectionResultsOverviewProps): JSX.Element {\n\tconst l = useLocalization(locales);\n\n\tconst results = categorizeResults(session.resultsList).collections.get(collectionUrn as Urn<\"collection\">) ?? [];\n\n\tconst title = (\n\t\t<CenterAlignTwo\n\t\t\tgrow=\"left\"\n\t\t\tleft={<CollectionLabel collectionUrn={collectionUrn} collections={collections} />}\n\t\t\tright={<Badge kind=\"Dark\">{l.matches}</Badge>}\n\t\t/>\n\t);\n\n\tconst itemNameMap = new Map(session.itemsList.map(item => [item.urn, item.meta?.name]));\n\n\treturn (\n\t\t<div className=\"CollectionResultsOverview\">\n\t\t\t<OverviewContainer backTo={backTo} title={title}>\n\t\t\t\t{results.map(({ item, document, result }) => {\n\t\t\t\t\tconst itemName = itemNameMap.get(PicapicaUrn.stringify(item)) ?? l.unknownItem;\n\t\t\t\t\tconst documentName = (\n\t\t\t\t\t\t<DocumentName sessionUrn={session.urn} urn={PicapicaUrn.stringify(document)} />\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={result.urn}>\n\t\t\t\t\t\t\t<Link className={Buttons.BUTTON} to={resultTo(result)}>\n\t\t\t\t\t\t\t\t<CenterAlignTwo\n\t\t\t\t\t\t\t\t\tgrow=\"left\"\n\t\t\t\t\t\t\t\t\tleft={\n\t\t\t\t\t\t\t\t\t\t<span className=\"item-vs\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"left\">{itemName}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"vs\">vs.</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"right\">{documentName}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tright={\n\t\t\t\t\t\t\t\t\t\tsession.status === Session.ComputeStatus.STATUS_COMPLETED ? (\n\t\t\t\t\t\t\t\t\t\t\t<Badge kind=\"Light\">{result.seedsList.length}</Badge>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<LoaderAnimation />\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\n\t\t\t\t{results.length === 0 && <div className=\"no-results\">{l.noResults}</div>}\n\t\t\t</OverviewContainer>\n\t\t</div>\n\t);\n}\n\nfunction DocumentName({ sessionUrn, urn }: { sessionUrn: string; urn: Urn<\"document\"> }): JSX.Element {\n\tconst document = useCollectionDocument(sessionUrn, urn);\n\tif (document?.properties) {\n\t\treturn <>{document.properties?.title}</>;\n\t}\n\treturn <LoaderAnimation />;\n}\n\nconst locales: Locales<SimpleString<\"back\" | \"analysisResults\" | \"results\" | \"matches\" | \"noResults\" | \"unknownItem\">> =\n\t{\n\t\ten: {\n\t\t\tback: \"Back\",\n\n\t\t\tanalysisResults: \"Analysis results\",\n\t\t\tresults: \"Results\",\n\t\t\tmatches: \"Matches\",\n\t\t\tnoResults: \"No results\",\n\n\t\t\tunknownItem: \"<unknown>\",\n\t\t},\n\t\tde: {\n\t\t\tback: \"Zur√ºck\",\n\n\t\t\tanalysisResults: \"Analyse\\xADergebnisse\",\n\t\t\tresults: \"Ergebnisse\",\n\t\t\tmatches: \"Treffer\",\n\t\t\tnoResults: \"Keine Ergebnisse\",\n\n\t\t\tunknownItem: \"<unbekannt>\",\n\t\t},\n\t};\n","import { QueryFunctionContext, useQueries, useQuery, UseQueryOptions } from \"react-query\";\nimport { GetDocumentRequest } from \"./generated/v1/services_pb\";\nimport { Document } from \"./generated/v1/types_pb\";\nimport { getSessionClient } from \"./session/client\";\nimport { Urn } from \"./session/urn\";\nimport { DeepReadonly } from \"./util\";\n\ntype QueryData = Document.AsObject | undefined;\ntype QueryKey = readonly [\"collection-document\", string, Urn<\"document\">];\n\nasync function fetchDocument(context: QueryFunctionContext<QueryKey>): Promise<QueryData> {\n\tconst [, sessionUrn, documentUrn] = context.queryKey;\n\n\tconst req = new GetDocumentRequest();\n\treq.setSessionUrn(sessionUrn);\n\treq.setDocumentUrn(documentUrn);\n\n\tconst resp = await getSessionClient().getDocument(req, null);\n\treturn resp.toObject().document;\n}\nfunction getQueryOptions(\n\tsessionUrn: string,\n\tdocumentUrn: Urn<\"document\">\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n): UseQueryOptions<QueryData, unknown, QueryData, QueryKey> & { queryKey: {} } {\n\treturn {\n\t\tqueryKey: [\"collection-document\", sessionUrn, documentUrn],\n\t\tqueryFn: fetchDocument,\n\t\t// collections are an immutable resource, so we don't need to refetch\n\t\trefetchInterval: false,\n\t\trefetchOnMount: false,\n\t\trefetchOnReconnect: false,\n\t\trefetchOnWindowFocus: false,\n\t};\n}\n\nexport function useCollectionDocument(\n\tsessionUrn: string,\n\tdocumentUrn: Urn<\"document\">\n): DeepReadonly<Document.AsObject> | undefined {\n\tconst options = getQueryOptions(sessionUrn, documentUrn);\n\tconst query = useQuery(options.queryKey, options);\n\treturn query.data;\n}\n\nexport function usePreloadCollectionDocuments(sessionUrn: string, documentUrns: readonly Urn<\"document\">[]): void {\n\tuseQueries(documentUrns.map(urn => getQueryOptions(sessionUrn, urn)));\n}\n","/**\n * Shuffles the given array.\n */\nfunction shuffle<T>(array: T[]): void {\n\tlet j, x, i;\n\tfor (i = array.length - 1; i > 0; i--) {\n\t\tj = Math.floor(Math.random() * (i + 1));\n\t\tx = array[i];\n\t\tarray[i] = array[j];\n\t\tarray[j] = x;\n\t}\n}\n\n/**\n * Returns a random subset of the given values with `min(count, values.length)` elements.\n *\n * @param values\n * @param count\n * @returns\n */\nfunction randomValues<T>(values: readonly T[], count: number): T[] {\n\tif (values.length <= count) return values.slice(0);\n\tif (count === 1) return [values[Math.floor(Math.random() * values.length)]];\n\n\tconst copy = values.slice(0);\n\tshuffle(copy);\n\treturn copy.slice(0, count);\n}\n\n/**\n * A least recently used cache.\n */\nexport class LRUCache<V> {\n\tsize: number;\n\n\tprivate _length: number;\n\tprivate _head: CacheNode<string, V>;\n\tprivate _tail: CacheNode<string, V>;\n\tprivate _map: Record<string, CacheNode<string, V>> = {};\n\n\t/**\n\t * Creates an instance of LRUCache.\n\t *\n\t * @param size The maximum size of the cache.\n\t */\n\tconstructor(size = 100) {\n\t\tthis.size = size;\n\t\tthis._length = 0;\n\n\t\tthis._head = new CacheNode<string, V>(null as any, null as any);\n\t\tthis._tail = new CacheNode<string, V>(null as any, null as any);\n\t\tthis._head.next = this._tail;\n\t\tthis._tail.prev = this._head;\n\t}\n\n\t/**\n\t * Adds a new element to the cache.\n\t *\n\t * @param key The key of the element.\n\t * @param obj The element.\n\t */\n\tadd(key: string, obj: V): void {\n\t\treturn this.addAll({ [key]: obj });\n\t}\n\t/**\n\t * Adds any number of key-value-pairs to the cache.\n\t *\n\t * @param map The collection of key-value-pairs.\n\t */\n\taddAll(map: Record<string, V>): void {\n\t\tlet keys = Object.keys(map);\n\t\tif (keys.length === 0) return;\n\t\tif (keys.length > this.size) keys = keys.slice(0, this.size);\n\n\t\tconst toRemove = keys.length + this._length - this.size;\n\t\tif (toRemove > 0) {\n\t\t\trandomValues(Object.keys(this._map), toRemove).forEach(key => {\n\t\t\t\tthis.remove(key);\n\t\t\t});\n\t\t}\n\n\t\tfor (const key of keys) {\n\t\t\tconst node = new CacheNode<string, V>(key, map[key]);\n\t\t\tthis._tail.insertBefore(node);\n\t\t\tthis._map[key] = node;\n\t\t\tthis._length++;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the cached value.\n\t *\n\t * @param key The key of the cached element.\n\t * @param defaultValue The default value.\n\t * @returns The cached element of the default value.\n\t */\n\tget(key: string, defaultValue: V): V;\n\tget(key: string, defaultValue?: V): V | undefined;\n\tget(key: string, defaultValue?: V): V | undefined {\n\t\tconst node = this._map[key];\n\t\tif (node) {\n\t\t\tnode.remove();\n\t\t\tthis._head.insertAfter(node);\n\t\t\treturn node.obj;\n\t\t} else {\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n\t/**\n\t * Returns whether an element with the given key is cached.\n\t *\n\t * @param key The key of the cached element.\n\t * @returns\n\t */\n\tcontains(key: string): boolean {\n\t\treturn Boolean(this._map[key]);\n\t}\n\n\t/**\n\t * Removes the cached element with the given key.\n\t *\n\t * @param key The key of the cached element.\n\t * @returns Whether there was an element cached.\n\t */\n\tremove(key: string): boolean {\n\t\tconst node = this._map[key];\n\t\tif (!node) return false;\n\t\tthis._removeNode(node);\n\t\treturn true;\n\t}\n\n\t_removeNode(node: CacheNode<string, V>): void {\n\t\tthis._length--;\n\t\tdelete this._map[node.key];\n\t\tnode.remove();\n\t}\n}\n\n/**\n * A node used by the internal implementation of the LRU cache.\n */\nclass CacheNode<K, V> {\n\tkey: K;\n\tobj: V;\n\n\tprev: CacheNode<K, V> | undefined = undefined;\n\tnext: CacheNode<K, V> | undefined = undefined;\n\n\tconstructor(key: K, obj: V) {\n\t\tthis.key = key;\n\t\tthis.obj = obj;\n\t}\n\n\tremove(): void {\n\t\tthis.prev!.next = this.next;\n\t\tthis.next!.prev = this.prev;\n\t}\n\n\tinsertAfter(afterNode: CacheNode<K, V>): void {\n\t\tafterNode.next = this.next;\n\t\tafterNode.prev = this;\n\n\t\tthis.next!.prev = afterNode;\n\t\tthis.next = afterNode;\n\t}\n\tinsertBefore(beforeNode: CacheNode<K, V>): void {\n\t\treturn this.prev!.insertAfter(beforeNode);\n\t}\n}\n","import { useEffect, useState } from \"react\";\nimport { SimpleCombinedDiff } from \"./alignment\";\nimport { LRUCache } from \"./lru-cache\";\nimport { useAsyncEffect } from \"./react-util\";\nimport { lazy, noop } from \"./util\";\n\nlet pendingResolvesCounter = 0;\nconst pendingResolves = new Map<number, (diff: SimpleCombinedDiff) => void>();\n\nconst getWorker = lazy(() => {\n\tconst worker = new Worker(new URL(\"./alignment.worker.ts\", import.meta.url));\n\tworker.onmessage = ({ data: { diff, id } }) => {\n\t\tconst resolve = pendingResolves.get(id);\n\t\tpendingResolves.delete(id);\n\t\tif (resolve) {\n\t\t\tresolve(diff);\n\t\t}\n\t};\n\treturn worker;\n});\n\nconst promiseCache = new LRUCache<Promise<SimpleCombinedDiff>>(500);\nconst resultCache = new LRUCache<SimpleCombinedDiff>(500);\n\nfunction getCacheKey(left: string, right: string): string {\n\treturn left + \"\\0\" + right;\n}\nfunction getSimpleCombinedDiff(left: string, right: string): Promise<SimpleCombinedDiff> {\n\tconst key = getCacheKey(left, right);\n\tlet promise = promiseCache.get(key);\n\tif (promise === undefined) {\n\t\tpromise = new Promise<SimpleCombinedDiff>(resolve => {\n\t\t\tconst id = pendingResolvesCounter++;\n\t\t\tpendingResolves.set(id, resolve);\n\t\t\tgetWorker().postMessage({ left, right, id });\n\t\t});\n\t\tpromiseCache.add(key, promise);\n\t\tpromise.then(diff => resultCache.add(key, diff));\n\t}\n\treturn promise;\n}\nfunction getCachedSimpleCombinedDiff(left: string, right: string): SimpleCombinedDiff | undefined {\n\tconst key = getCacheKey(left, right);\n\treturn resultCache.get(key);\n}\n\nexport interface AlignmentRequest {\n\tleft: string;\n\tright: string;\n}\nexport interface Alignment {\n\treadonly left: string;\n\treadonly right: string;\n\tdiff: SimpleCombinedDiff | undefined;\n}\n\n/**\n * Returns the alignments for some strings.\n *\n * The purpose of this hooks is to provide a convenient way to use a web worker to compute the alignment.\n *\n * @param key\n * @param requests\n * @returns\n */\nexport function useAlignment(key: string, requests: readonly AlignmentRequest[]): [readonly Alignment[]] {\n\tconst [requestsKey, setRequestsKey] = useState(key);\n\tconst [state, setState] = useState<readonly Alignment[]>(() => GetInitialAlignments(requests));\n\n\tuseEffect(() => {\n\t\tif (key !== requestsKey) {\n\t\t\tsetRequestsKey(key);\n\t\t\tsetState(GetInitialAlignments(requests));\n\t\t}\n\t}, [key, requestsKey, requests]);\n\n\tuseAsyncEffect<readonly Alignment[] | undefined>(\n\t\tasync token => {\n\t\t\t// all alignments are computed\n\t\t\tif (state.every(a => a.diff !== undefined)) return;\n\n\t\t\tconst newState = [...state];\n\n\t\t\t// try to fill-in as many cached results as possible\n\t\t\tfor (let i = 0; i < state.length; i++) {\n\t\t\t\tconst alignment = state[i];\n\t\t\t\tif (alignment.diff === undefined) {\n\t\t\t\t\tconst diff = getCachedSimpleCombinedDiff(alignment.left, alignment.right);\n\t\t\t\t\tif (diff !== undefined) {\n\t\t\t\t\t\tnewState[i] = { ...alignment, diff };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// compute at most one diff\n\t\t\tfor (let i = 0; i < state.length; i++) {\n\t\t\t\tconst alignment = state[i];\n\t\t\t\tif (alignment.diff === undefined) {\n\t\t\t\t\tnewState[i] = { ...alignment, diff: await getSimpleCombinedDiff(alignment.left, alignment.right) };\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newState;\n\t\t},\n\t\tnewState => {\n\t\t\tif (newState) {\n\t\t\t\tsetState(newState);\n\t\t\t}\n\t\t},\n\t\tnoop,\n\t\t[state]\n\t);\n\n\treturn [state];\n}\n\nfunction GetInitialAlignments(requests: readonly AlignmentRequest[]): readonly Alignment[] {\n\treturn requests.map(r => {\n\t\treturn { left: r.left, right: r.right, diff: getCachedSimpleCombinedDiff(r.left, r.right) };\n\t});\n}\n","import React, { memo } from \"react\";\nimport { LeftChange, RightChange } from \"../lib/alignment\";\nimport { Locales } from \"../lib/localization\";\nimport { useAlignment } from \"../lib/use-alignment\";\nimport { useLocalization } from \"../lib/use-localization\";\nimport \"./alignment-view.scss\";\n\nexport interface Props {\n\treadonly left: string;\n\treadonly right: string;\n\treadonly alignmentKey: string;\n}\n\nexport const AlignmentView = memo((props: Props): JSX.Element => {\n\tconst [alignments] = useAlignment(props.alignmentKey, [props]);\n\n\tconst diff = alignments[0]?.diff?.diff;\n\n\treturn (\n\t\t<div className=\"AlignmentView\">\n\t\t\t{diff ? (\n\t\t\t\t<>\n\t\t\t\t\t{diff.map(({ left }, i) => {\n\t\t\t\t\t\treturn <DiffView key={\"l\" + i} left={left} index={i} total={diff.length} />;\n\t\t\t\t\t})}\n\t\t\t\t\t{diff.map(({ right }, i) => {\n\t\t\t\t\t\treturn <DiffView key={\"r\" + i} right={right} index={i} total={diff.length} />;\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"left\" style={{ gridRow: 1 }}>\n\t\t\t\t\t\t<span>{props.left}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\" style={{ gridRow: 1 }}>\n\t\t\t\t\t\t<span>{props.right}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n});\n\ninterface DiffLineProps {\n\tindex: number;\n\ttotal: number;\n}\nfunction DiffView(props: ({ left: LeftChange<string> } | { right: RightChange<string> }) & DiffLineProps): JSX.Element {\n\tlet equal: string;\n\tlet changed: string;\n\tlet type: \"left\" | \"right\";\n\tif (\"left\" in props) {\n\t\tequal = props.left.equal;\n\t\tchanged = props.left.removed;\n\t\ttype = \"left\";\n\t} else {\n\t\tequal = props.right.equal;\n\t\tchanged = props.right.added;\n\t\ttype = \"right\";\n\t}\n\n\tconst changedClass = type === \"left\" ? \"removed\" : \"added\";\n\n\treturn (\n\t\t<div className={type} style={{ gridRow: props.index + 1 }}>\n\t\t\t{equal !== \"\" ? (\n\t\t\t\t<>\n\t\t\t\t\t<span className=\"unchanged\">{equal.trim()}</span>\n\t\t\t\t\t{/\\s$/.test(equal) ? \" \" : \"\"}\n\t\t\t\t\t<Change {...props} type={changedClass} text={changed} isFirst={false} />\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<Change {...props} type={changedClass} text={changed} isFirst={true} />\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\ninterface ChangeProps {\n\ttext: string;\n\ttype: \"added\" | \"removed\";\n\tindex: number;\n\ttotal: number;\n\tisFirst: boolean;\n}\nfunction Change(props: ChangeProps): JSX.Element {\n\tconst text = props.text;\n\n\tconst context = 500;\n\tconst minOmitted = 20;\n\n\tconst isLast = props.index === props.total - 1;\n\tif (isLast && text.length > context) {\n\t\tconst tokens = tokenizeWords(text);\n\t\tconst rest = splitRest(tokens, context);\n\t\tif (rest.length > minOmitted) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<span className={props.type}>\n\t\t\t\t\t\t<FadeText text={tokens.join(\" \").trim()} position=\"end\" />\n\t\t\t\t\t</span>\n\t\t\t\t\t<Omitted words={rest.length} />\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t} else if (props.isFirst && text.length > context) {\n\t\tconst tokens = tokenizeWords(text).reverse();\n\t\tconst rest = splitRest(tokens, context);\n\t\tif (rest.length > minOmitted) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Omitted words={rest.length} />\n\t\t\t\t\t<span className={props.type}>\n\t\t\t\t\t\t<FadeText text={tokens.reverse().join(\" \").trim()} position=\"start\" />\n\t\t\t\t\t</span>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t} else if (text.length > context * 2) {\n\t\tconst start = tokenizeWords(text);\n\t\tconst end = splitRest(start, context).reverse();\n\t\tconst rest = splitRest(end, context);\n\n\t\tif (rest.length > minOmitted) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<span className={props.type}>\n\t\t\t\t\t\t<FadeText text={start.join(\" \").trim()} position=\"end\" />\n\t\t\t\t\t</span>\n\t\t\t\t\t<Omitted words={rest.length} />\n\t\t\t\t\t<span className={props.type}>\n\t\t\t\t\t\t<FadeText text={end.reverse().join(\" \").trim()} position=\"start\" />\n\t\t\t\t\t</span>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn <span className={props.type}>{props.text}</span>;\n}\nfunction tokenizeWords(text: string): string[] {\n\treturn text.split(/ /g);\n}\nfunction splitRest(tokens: string[], stringLength: number): string[] {\n\tlet length = 0;\n\tfor (let i = 0; i < tokens.length; i++) {\n\t\tlength += tokens[i].length;\n\t\tif (length >= stringLength) {\n\t\t\treturn tokens.splice(i + 1, tokens.length - i - 1);\n\t\t}\n\t}\n\n\treturn [];\n}\n\ninterface FadeTextProps {\n\ttext: string;\n\tposition: \"start\" | \"end\";\n}\nfunction FadeText(props: FadeTextProps): JSX.Element {\n\tconst fadeLength = 10;\n\n\tconst chars = [...props.text];\n\tif (chars.length < fadeLength) {\n\t\t// fail safe\n\t\treturn <>{props.text}</>;\n\t}\n\n\tconst fade =\n\t\tprops.position === \"start\" ? chars.splice(0, fadeLength) : chars.splice(chars.length - fadeLength, fadeLength);\n\tconst text = chars.join(\"\");\n\n\tif (props.position === \"start\") {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{fade.map((c, i) => (\n\t\t\t\t\t<span key={i} className=\"fade\" style={{ opacity: i / fadeLength }}>\n\t\t\t\t\t\t{c}\n\t\t\t\t\t</span>\n\t\t\t\t))}\n\t\t\t\t{text}\n\t\t\t</>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{text}\n\t\t\t\t{fade.map((c, i) => (\n\t\t\t\t\t<span key={i} className=\"fade\" style={{ opacity: (fadeLength - i) / fadeLength }}>\n\t\t\t\t\t\t{c}\n\t\t\t\t\t</span>\n\t\t\t\t))}\n\t\t\t</>\n\t\t);\n\t}\n}\n\ninterface OmittedProps {\n\twords: number;\n}\nfunction Omitted(props: OmittedProps): JSX.Element {\n\tconst l = useLocalization(locales);\n\treturn <span className=\"Omitted\"> [{l.omitted(props.words)}] </span>;\n}\n\nconst locales: Locales<{\n\tomitted: (words: number) => JSX.Element;\n}> = {\n\ten: {\n\t\tomitted(words) {\n\t\t\treturn <>‚Ä¶ {words} words omitted</>;\n\t\t},\n\t},\n\tde: {\n\t\tomitted(words) {\n\t\t\treturn <>‚Ä¶ {words} W√∂rter weggelassen</>;\n\t\t},\n\t},\n};\n","import { useQuery } from \"react-query\";\nimport { GetTextRequest, GetTextResponse } from \"./generated/v1/services_pb\";\nimport { Result, Span } from \"./generated/v1/types_pb\";\nimport { getSessionClient } from \"./session/client\";\nimport { PicapicaUrn } from \"./session/urn\";\nimport { DeepReadonly } from \"./util\";\n\nexport interface SeedText {\n\treadonly a: ResultText;\n\treadonly b: ResultText;\n}\nexport interface ResultText {\n\treadonly resourceUrn: string;\n\treadonly span: DeepReadonly<Span.AsObject>;\n\treadonly text: string;\n}\n\nexport function useResultText(result: DeepReadonly<Result.AsObject>): [readonly SeedText[] | undefined] {\n\tconst query = useQuery([\"result-text\", result.urn] as const, {\n\t\t// text is an immutable resource, so we don't need to refetch\n\t\trefetchInterval: false,\n\t\trefetchOnMount: false,\n\t\trefetchOnReconnect: false,\n\t\trefetchOnWindowFocus: false,\n\n\t\tqueryFn: async () => {\n\t\t\tconst data = getSpanData(result);\n\t\t\tconst client = getSessionClient();\n\n\t\t\tconst resultUrn = PicapicaUrn.parse(result.urn);\n\t\t\tif (resultUrn.type !== \"result\") throw new Error(\"Invalid result urn.\");\n\t\t\tconst sessionUrn = PicapicaUrn.stringify({ type: \"session\", sessionId: resultUrn.sessionId });\n\n\t\t\tconst texts = await Promise.all(\n\t\t\t\tdata.map(({ resourceUrn, span }) => {\n\t\t\t\t\tconst s = new Span();\n\t\t\t\t\ts.setBegin(span.begin);\n\t\t\t\t\ts.setEnd(span.end);\n\t\t\t\t\ts.setIndex(span.index);\n\n\t\t\t\t\tconst req = new GetTextRequest();\n\t\t\t\t\treq.setSessionUrn(sessionUrn);\n\t\t\t\t\treq.setResourceUrn(resourceUrn);\n\t\t\t\t\treq.setSpan(s);\n\n\t\t\t\t\treturn client.getText(req, null);\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn getSeedTexts(data, texts);\n\t\t},\n\t});\n\n\treturn [query.data];\n}\n\ninterface SpanData {\n\tresourceUrn: string;\n\tspan: DeepReadonly<Span.AsObject>;\n}\nfunction getSpanData(result: DeepReadonly<Result.AsObject>): SpanData[] {\n\tconst data: SpanData[] = [];\n\n\tif (!result.resources) throw new Error(\"Invalid result object: Undefined resources\");\n\tconst { urnA, urnB } = result.resources;\n\n\tfor (const { span1, span2 } of result.seedsList) {\n\t\tif (!span1 || !span2) throw new Error(\"Invalid result object: Undefined span in seed list\");\n\t\tdata.push({ resourceUrn: urnA, span: span1 });\n\t\tdata.push({ resourceUrn: urnB, span: span2 });\n\t}\n\n\treturn data;\n}\n\nfunction getSeedTexts(data: readonly SpanData[], texts: readonly GetTextResponse[]): SeedText[] {\n\tconst result: SeedText[] = [];\n\n\tfor (let i = 0; i < data.length; i += 2) {\n\t\tresult.push({\n\t\t\ta: { ...data[i + 0], text: texts[i + 0].getTextSpan()?.getText() ?? \"\" },\n\t\t\tb: { ...data[i + 1], text: texts[i + 1].getTextSpan()?.getText() ?? \"\" },\n\t\t});\n\t}\n\n\treturn result;\n}\n","import React from \"react\";\nimport { AlignmentView } from \"../elements/alignment-view\";\nimport { CenterAlignTwo } from \"../elements/center-align-two\";\nimport { ItemTypeIcon } from \"../elements/icon\";\nimport { LoaderAnimation } from \"../elements/loader-animation\";\nimport { Page } from \"../elements/page\";\nimport { OverviewContainer } from \"../elements/results-overview\";\nimport { SessionState } from \"../elements/session-creating-loading\";\nimport { SharedHead } from \"../elements/shared-header\";\nimport { Session } from \"../lib/generated/v1/services_pb\";\nimport * as types from \"../lib/generated/v1/types_pb\";\nimport { Locales, SimpleString } from \"../lib/localization\";\nimport { toResults } from \"../lib/page-links\";\nimport { dynamicComponent } from \"../lib/react-util\";\nimport { PicapicaUrn, Urn } from \"../lib/session/urn\";\nimport { getLocationSearchParams } from \"../lib/url-params\";\nimport { useAlignment } from \"../lib/use-alignment\";\nimport { useCollectionDocument } from \"../lib/use-collection-document\";\nimport { useLocalization } from \"../lib/use-localization\";\nimport { SeedText, useResultText } from \"../lib/use-result-text\";\nimport { Ready, useLoadSession } from \"../lib/use-session\";\nimport { debugAssert, DeepReadonly } from \"../lib/util\";\nimport \"./result.scss\";\n\nexport const Head = (): JSX.Element => (\n\t<>\n\t\t<title>Picapica</title>\n\t\t<meta name=\"robots\" content=\"noindex\"></meta>\n\t\t<SharedHead />\n\t</>\n);\n\nexport default dynamicComponent(Result);\n\nfunction Result(): JSX.Element {\n\tconst l = useLocalization(locales);\n\tconst [state] = useLoadSession();\n\n\tconst onReady = ({ session }: Ready): JSX.Element => {\n\t\treturn (\n\t\t\t<OverviewContainer\n\t\t\t\ttitle=\"Text alignment\"\n\t\t\t\tbackTo={toResults({\n\t\t\t\t\turn: session.urn,\n\t\t\t\t\tview: getLocationSearchParams().get(\"view\") ?? undefined,\n\t\t\t\t})}>\n\t\t\t\t<ResultValidity session={session} />\n\t\t\t</OverviewContainer>\n\t\t);\n\t};\n\n\treturn (\n\t\t<Page className=\"Result\" title={l.title} header=\"small\">\n\t\t\t<SessionState state={state} onReady={onReady} />\n\t\t</Page>\n\t);\n}\n\nfunction ResultValidity({ session }: { session: DeepReadonly<Session.AsObject> }): JSX.Element {\n\tconst l = useLocalization(locales);\n\n\tconst pageUrn = getLocationSearchParams().get(\"urn\");\n\tconst result = session.resultsList.find(r => r.urn === pageUrn);\n\n\tif (!result) {\n\t\treturn (\n\t\t\t<div className=\"invalid-result-error\">\n\t\t\t\t<p>{l.invalidUrn}</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (result.status !== types.Result.ResultStatusCode.STATUS_OK) {\n\t\treturn <div className=\"invalid-result-error\">{l.failedResult(result.status)}</div>;\n\t}\n\n\tdebugAssert(result.resources !== undefined, \"Expected that the result object has resources\");\n\tconst left = getResultResource(result.resources.urnA, session);\n\tconst right = getResultResource(result.resources.urnB, session);\n\n\tconst error = left.type === \"error\" ? left : right.type === \"error\" ? right : undefined;\n\tif (error) {\n\t\tthrow new Error(\"\");\n\t}\n\n\tif (left.type === \"error\") {\n\t\treturn (\n\t\t\t<div className=\"invalid-result-error\">\n\t\t\t\t<p>{l[`resultError${left.error}`]}</p>\n\t\t\t</div>\n\t\t);\n\t}\n\tif (right.type === \"error\") {\n\t\treturn (\n\t\t\t<div className=\"invalid-result-error\">\n\t\t\t\t<p>{l[`resultError${right.error}`]}</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn <ResultView left={left} right={right} result={result} />;\n}\n\ntype ResultResource = ResultResourceSessionItem | ResultResourceCollectionDocument;\ninterface ResultResourceSessionItem {\n\ttype: \"item\";\n\titem: DeepReadonly<types.Item.AsObject>;\n}\ninterface ResultResourceCollectionDocument {\n\ttype: \"document\";\n\tsessionUrn: string;\n\tcollectionUrn: Urn<\"collection\">;\n\tdocumentUrn: Urn<\"document\">;\n}\ninterface ResultResourceError {\n\ttype: \"error\";\n\terror: \"InvalidUrnType\" | \"UnknownItem\";\n}\nfunction getResultResource(urn: string, session: DeepReadonly<Session.AsObject>): ResultResource | ResultResourceError {\n\tconst parsed = PicapicaUrn.parse(urn);\n\n\tif (parsed.type === \"item\") {\n\t\tconst item = session.itemsList.find(i => i.urn === urn);\n\t\tif (!item) return { type: \"error\", error: \"UnknownItem\" };\n\t\treturn { type: \"item\", item };\n\t}\n\n\tif (parsed.type === \"document\") {\n\t\tconst collectionUrn = PicapicaUrn.stringify({ type: \"collection\", collectionId: parsed.collectionId });\n\t\treturn { type: \"document\", documentUrn: PicapicaUrn.stringify(parsed), sessionUrn: session.urn, collectionUrn };\n\t}\n\n\treturn { type: \"error\", error: \"InvalidUrnType\" };\n}\n\ninterface ResultViewProps {\n\treadonly result: DeepReadonly<types.Result.AsObject>;\n\treadonly left: ResultResource;\n\treadonly right: ResultResource;\n}\n\nfunction ResultView({ result, left, right }: ResultViewProps): JSX.Element {\n\tconst [texts] = useResultText(result);\n\n\treturn (\n\t\t<>\n\t\t\t<ResultSummary result={result} />\n\t\t\t{texts?.map((text, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ResultSeedView key={i} alignmentKey={`${i}:${result.urn}`} left={left} right={right} text={text} />\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n}\n\ninterface ResultSummaryProps {\n\treadonly result: DeepReadonly<types.Result.AsObject>;\n}\nfunction ResultSummary({ result }: ResultSummaryProps): JSX.Element {\n\tconst l = useLocalization(locales);\n\n\tconst [texts] = useResultText(result);\n\n\tconst [alignments] = useAlignment(\n\t\t`${texts?.length}:${result.urn}`,\n\t\ttexts?.map(t => ({ left: t.a.text, right: t.b.text })) ?? []\n\t);\n\n\tlet sharedWords = 0;\n\tlet incomplete = texts === undefined;\n\tif (texts) {\n\t\tfor (const alignment of alignments) {\n\t\t\tsharedWords += alignment.diff?.sharedWords ?? 0;\n\t\t\tincomplete ||= alignment.diff === undefined;\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"ResultSummary\">\n\t\t\t<p className=\"summary\">{l.reusedPassages(result.seedsList.length)}</p>\n\t\t\t<p className=\"details\">{l.detailed(result.seedsList.length, sharedWords, incomplete)}</p>\n\t\t</div>\n\t);\n}\n\ninterface ResultSeedViewProps {\n\treadonly left: ResultResource;\n\treadonly right: ResultResource;\n\treadonly text: SeedText;\n\treadonly alignmentKey: string;\n}\nfunction ResultSeedView({ left, right, text, alignmentKey }: ResultSeedViewProps): JSX.Element {\n\treturn (\n\t\t<div className=\"ResultSeedView\">\n\t\t\t<div className=\"header\">\n\t\t\t\t<div className=\"left\">\n\t\t\t\t\t<ResultLabel resource={left} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"right\">\n\t\t\t\t\t<ResultLabel resource={right} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"alignment\">\n\t\t\t\t<AlignmentView alignmentKey={alignmentKey} left={text.a.text} right={text.b.text} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ResultLabelProps {\n\tresource: ResultResource;\n}\nfunction ResultLabel({ resource }: ResultLabelProps): JSX.Element {\n\treturn (\n\t\t<span className=\"ResultLabel\">\n\t\t\t{resource.type === \"item\" ? (\n\t\t\t\t<ItemResultLabel resource={resource} />\n\t\t\t) : (\n\t\t\t\t<DocumentResultLabel resource={resource} />\n\t\t\t)}\n\t\t</span>\n\t);\n}\nfunction ItemResultLabel({ resource }: { resource: ResultResourceSessionItem }): JSX.Element {\n\tconst { item } = resource;\n\n\treturn (\n\t\t<CenterAlignTwo\n\t\t\tclassName=\"ItemResultLabel\"\n\t\t\tgrow=\"right\"\n\t\t\tleft={<ItemTypeIcon type={item.resource?.type ?? types.Item.Resource.Type.TYPE_UNSPECIFIED} />}\n\t\t\tright={<span className=\"text\">{item.meta?.name ?? \"\"}</span>}\n\t\t/>\n\t);\n}\nfunction DocumentResultLabel({ resource }: { resource: ResultResourceCollectionDocument }): JSX.Element {\n\tconst { documentUrn, sessionUrn } = resource;\n\n\tconst document = useCollectionDocument(sessionUrn, documentUrn);\n\n\treturn (\n\t\t<span className=\"DocumentResultLabel\">\n\t\t\t<span className=\"text\">{document?.properties?.title ?? <LoaderAnimation />}</span>\n\t\t</span>\n\t);\n}\n\nconst locales: Locales<\n\tSimpleString<\"title\" | \"invalidUrn\" | `resultError${ResultResourceError[\"error\"]}`> & {\n\t\tfailedResult: (status: types.Result.ResultStatusCode) => JSX.Element;\n\t\treusedPassages: (reused: number) => JSX.Element;\n\t\tdetailed: (reused: number, sharedWords: number, incomplete: boolean) => JSX.Element;\n\t}\n> = {\n\ten: {\n\t\ttitle: \"Result - Picapica\",\n\n\t\tinvalidUrn: \"Invalid link. The result you are trying to access is not available.\",\n\t\tfailedResult(status) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<p>Picapica was unable to calculate this result due to a server error.</p>\n\t\t\t\t\t<p>Status code: {status}</p>\n\t\t\t\t</>\n\t\t\t);\n\t\t},\n\n\t\tresultErrorInvalidUrnType:\n\t\t\t\"Invalid URN type in result. This is a problem with Picapica itself. Please report this bug.\",\n\t\tresultErrorUnknownItem:\n\t\t\t\"Invalid item in result. The item has likely been deleted which means that this result can no longer be viewed.\",\n\n\t\treusedPassages(reused) {\n\t\t\tif (reused === 1) {\n\t\t\t\treturn <>Found 1 reused passage.</>;\n\t\t\t}\n\t\t\treturn <>Found {reused} reused passages.</>;\n\t\t},\n\t\tdetailed(reused, sharedWords, incomplete) {\n\t\t\tconst details: string[] = [];\n\n\t\t\tdetails.push(reused === 1 ? `1 reused passage` : `${reused} reused passages`);\n\n\t\t\tconst atLeast = incomplete ? \">\" : \"\";\n\t\t\tdetails.push(sharedWords === 1 ? `${atLeast}1 shared word` : `${atLeast}${sharedWords} shared words`);\n\n\t\t\treturn <>Detailed comparison of your submitted document: {details.join(\", \")}</>;\n\t\t},\n\t},\n\tde: {\n\t\ttitle: \"Ergebnis - Picapica\",\n\n\t\tinvalidUrn: \"Falscher Link. Das Ergebnis ist nicht verf√ºgbar.\",\n\t\tfailedResult(status) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<p>Picapica konnte dieses Ergebnis nicht berechnen wegen eines Serverproblems.</p>\n\t\t\t\t\t<p>Statuscode: {status}</p>\n\t\t\t\t</>\n\t\t\t);\n\t\t},\n\n\t\tresultErrorInvalidUrnType:\n\t\t\t\"Flascher URN-Type im Ergebnis. Dies ist ein Problem in der Picapica Software. Bitte melden Sie diesen Fehler.\",\n\t\tresultErrorUnknownItem:\n\t\t\t\"Invalid item in result. The item has likely been deleted which means that this result can no longer be viewed.\",\n\n\t\treusedPassages(reused) {\n\t\t\tif (reused === 1) {\n\t\t\t\treturn <>1 wiederverwendete Passage gefunden.</>;\n\t\t\t}\n\t\t\treturn <>{reused} wiederverwendete Passagen gefunden.</>;\n\t\t},\n\t\tdetailed(reused, sharedWords, incomplete) {\n\t\t\tconst details: string[] = [];\n\n\t\t\tdetails.push(reused === 1 ? `1 wiederverwendete Passage` : `${reused} wiederverwendete Passagen`);\n\n\t\t\tconst atLeast = incomplete ? \">\" : \"\";\n\t\t\tdetails.push(\n\t\t\t\tsharedWords === 1 ? `${atLeast}1 gemeinsames Wort` : `${atLeast}${sharedWords} gemeinsame W√∂rter`\n\t\t\t);\n\n\t\t\treturn <>Detailierter Vergleich Ihres eingereichten Dokuments: {details.join(\", \")}</>;\n\t\t},\n\t},\n};\n"],"names":["CenterAlignTwo","className","grow","knownCollections","en","core_fulltext_languagenameenglish","title","de","EMPTY_OBJ","Label","props","kind","SubmittedFilesLabel","l","useLocalization","icon","text","CollectionLabel","urn","PicapicaUrn","collection","urnString","parsed","c","processProps","known","useCollectionLocalization","name","description","locales","submittedFiles","unknown","LoaderAnimation","id","categorizeResults","results","categories","items","collections","invalid","addDocument","collectionUrn","type","collectionId","document","list","a","result","b","Badge","OverviewContainer","backTo","Buttons","to","ResultsOverview","session","console","left","right","running","Session","key","sessionUrn","collectionTo","usePreloadCollectionDocuments","r","ItemResultsOverview","itemNameMap","Map","item","leftName","rightName","resultTo","CollectionResultsOverview","itemName","documentName","useCollectionDocument","back","analysisResults","matches","noResults","unknownItem","async","fetchDocument","context","req","getSessionClient","resp","queryKey","queryFn","refetchInterval","refetchOnMount","refetchOnReconnect","refetchOnWindowFocus","options","getQueryOptions","useQuery","useQueries","documentUrns","randomValues","values","count","Math","copy","j","i","array","x","shuffle","LRUCache","_map","constructor","size","this","_length","_head","CacheNode","_tail","next","prev","add","addAll","map","keys","Object","toRemove","remove","node","insertBefore","get","insertAfter","defaultValue","contains","Boolean","_removeNode","obj","afterNode","beforeNode","pendingResolvesCounter","pendingResolves","getWorker","lazy","worker","Worker","URL","data","resolve","promiseCache","resultCache","getCacheKey","promise","Promise","diff","useAlignment","requestsKey","useState","state","GetInitialAlignments","useEffect","setRequestsKey","setState","newState","alignment","getCachedSimpleCombinedDiff","getSimpleCombinedDiff","requests","AlignmentView","memo","alignments","index","total","style","gridRow","DiffView","equal","changed","changedClass","test","isFirst","tokens","tokenizeWords","rest","splitRest","position","words","start","end","length","fadeLength","chars","fade","opacity","omitted","useResultText","query","span1","resourceUrn","span","getSpanData","client","resultUrn","sessionId","texts","s","getSeedTexts","Head","content","dynamicComponent","useLoadSession","header","onReady","toResults","view","getLocationSearchParams","undefined","ResultValidity","pageUrn","types","debugAssert","getResultResource","Error","error","documentUrn","ResultView","alignmentKey","ResultSummary","t","sharedWords","incomplete","ResultSeedView","resource","ResultLabel","ItemResultLabel","DocumentResultLabel","invalidUrn","failedResult","status","resultErrorInvalidUrnType","resultErrorUnknownItem","reusedPassages","reused","detailed","details","atLeast"],"sourceRoot":""}