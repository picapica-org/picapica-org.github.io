"use strict";(self.webpackChunkpicapica_web_client=self.webpackChunkpicapica_web_client||[]).push([[183],{9435:function(e,t){t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):a===t}))}return!0}},5755:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(7294),a=n(376);function o({id:e}){return r.createElement("span",{className:"LoaderAnimation",id:e}," ",r.createElement(a.JO,{kind:"loader-5-line"}),r.createElement(a.JO,{kind:"loader-5-line"}))}},2974:function(e,t,n){n.d(t,{C:function(){return a}});var r=n(7294);function a({left:e,right:t,instruction:n}){return r.createElement("div",{className:"StepActionBar"},r.createElement("div",{className:"left"},r.createElement("div",null,e)),r.createElement("div",{className:"instruction"},n),r.createElement("div",{className:"right"},r.createElement("div",null,t)))}},2639:function(e,t,n){n.d(t,{aW:function(){return c},xE:function(){return s},nh:function(){return u}});var r=n(5444),a=n(7294),o=n(8385),i=n(1874),l=n(376);function c({to:e}){const t=(0,o.ql)(f).next;return a.createElement(r.rU,{to:e,className:`NextButton ${i.E.BUTTON}`,title:t},a.createElement("span",{className:"text"},t),a.createElement(l.fd,{kind:"next"}))}function s({to:e}){const t=(0,o.ql)(f).back;return a.createElement(r.rU,{to:e,className:`BackButton ${i.E.BUTTON}`,title:t},a.createElement(l.fd,{kind:"back"}),a.createElement("span",{className:"text"},t))}function u({to:e}){const t=(0,o.ql)(f).start;return a.createElement(r.rU,{to:e,className:`StartButton ${i.E.BUTTON} ${i.E.GREEN}`,title:t},a.createElement("span",{className:"text"},t),a.createElement(l.fd,{kind:"next"}))}const f={en:{next:"Next",back:"Back",start:"Start"},de:{next:"Weiter",back:"Zurück",start:"Start"}}},5795:function(e,t,n){n.d(t,{n0:function(){return v},Px:function(){return f}});var r=n(5444),a=n(7294),o=n(1194),i=n(8385),l=n(3046),c=n(1874);function s({heading:e,children:t}){return a.createElement("div",{className:"Group"},a.createElement("div",{className:"group-heading"},e),a.createElement("div",{className:"group-container"},t))}var u=n(376);function f(e,t){switch(e){case"submit":return(0,o.me)({urn:t});case"analysis":return(0,o.sF)({urn:t});case"checkout":return"/checkout/";case"results":return(0,o.bq)({urn:t});default:(0,l.vE)(e)}}const m=["submit","analysis","checkout","results"],d={submit:"upload",analysis:"analyse",checkout:"checkout",results:"results"};function p({current:e,sessionUrn:t,disableOthers:n}){const o=(0,i.ql)(g);return a.createElement("span",{className:`StepSelector ${c.E.BUTTON_GROUP}`},m.filter((e=>"checkout"!==e)).map((i=>{const l=o[i];return n&&i!==e?a.createElement("span",{key:i,className:`${c.E.BUTTON} ${c.E.DISABLED}`,title:l},a.createElement(u.fd,{kind:d[i]}),a.createElement("span",{className:"text"},l)):a.createElement(r.rU,{key:i,to:f(i,t),className:`${c.E.BUTTON}${i===e?" "+c.E.ACTIVE:""}`,title:l},a.createElement(u.fd,{kind:d[i]}),a.createElement("span",{className:"text"},l))})))}function v({current:e,sessionUrn:t,disableOthers:n,children:r}){return a.createElement("div",{className:"StepSelectorGroup"},a.createElement(s,{heading:a.createElement("div",{className:"heading-wrapper"},a.createElement(p,{current:e,sessionUrn:t,disableOthers:n}))},r))}const g={en:{submit:"Upload",analysis:"Analysis",checkout:"Checkout",results:"Results"},de:{submit:"Hochladen",analysis:"Analyse",checkout:"Kasse",results:"Ergebnisse"}}},8807:function(e,t,n){n.d(t,{PT:function(){return o},jD:function(){return i},ww:function(){return l}});var r=n(1038),a=n(7653);function o(e,t){const n=new r.DeleteItemRequest;return n.setSessionUrn(e.urn),n.setItemUrn(t),{request:n,mutate(e){const n=(0,a.R3)(e);return n.itemsList=n.itemsList.filter((e=>e.urn!==t)),n}}}function i(e,t,n){const o=n.toObject(),i=new r.UpdateItemRequest;return i.setSessionUrn(e.urn),i.setItemUrn(t),i.setMeta(n),{request:i,mutate(e){const n=(0,a.R3)(e),r=n.itemsList.find((e=>e.urn===t));return r&&(r.meta=o),n}}}function l(e,t){const n=t.getResourcePairs(),o=n.map((e=>e.toObject())),i=new r.UpdateComparisonSetRequest;return i.setSessionUrn(e.urn),i.setComparisonsList(n),{request:i,mutate(e){const t=(0,a.R3)(e);return t.comparisonsList=o,t}}}},7653:function(e,t,n){function r(e){return JSON.parse(JSON.stringify(e))}function a(){const e=Date.now();return{seconds:Math.floor(e/1e3),nanos:e%1e3*1e7}}function o(e,t){return e.seconds===t.seconds?e.nanos-t.nanos:e.seconds-t.seconds}function i(e){return[...e].sort(((e,t)=>{const n=e.createdAt,r=t.createdAt;return n||r?n?r?o(n,r)||e.urn.localeCompare(t.urn):1:-1:0}))}n.d(t,{R3:function(){return r},VN:function(){return a},pv:function(){return o},a$:function(){return i}})},5225:function(e,t,n){n.r(t),n.d(t,{default:function(){return Xe}});var r=n(7294);function a(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}Object.create;function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}Object.create;var l=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function c(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=l.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var s=[".DS_Store","Thumbs.db"];function u(e){return(null!==e.target&&e.target.files?d(e.target.files):[]).map((function(e){return c(e)}))}function f(e,t){return a(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return e.items?(n=d(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(p))]):[3,2];case 1:return[2,m(v(r.sent()))];case 2:return[2,m(d(e.files).map((function(e){return c(e)})))]}}))}))}function m(e){return e.filter((function(e){return-1===s.indexOf(e.name)}))}function d(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function p(e){if("function"!=typeof e.webkitGetAsEntry)return g(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?h(t):g(e)}function v(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}(e,Array.isArray(t)?v(t):[t])}),[])}function g(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=c(t);return Promise.resolve(n)}function E(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){return[2,e.isDirectory?h(e):y(e)]}))}))}function h(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var l=this;t.readEntries((function(t){return a(l,void 0,void 0,(function(){var a,l,c;return o(this,(function(o){switch(o.label){case 0:if(t.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return a=o.sent(),e(a),[3,4];case 3:return l=o.sent(),n(l),[3,4];case 4:return[3,6];case 5:c=Promise.all(t.map(E)),r.push(c),i(),o.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function y(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=c(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var b=n(9435);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N="file-invalid-type",x="file-too-large",D="file-too-small",O="too-many-files",T=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:N,message:"File type must be ".concat(t)}},C=function(e){return{code:x,message:"File is larger than ".concat(e," bytes")}},S=function(e){return{code:D,message:"File is smaller than ".concat(e," bytes")}},A={code:O,message:"Too many files"};function F(e,t){var n="application/x-moz-file"===e.type||(0,b.Z)(e,t);return[n,n?null:T(t)]}function L(e,t,n){if(U(e.size))if(U(t)&&U(n)){if(e.size>n)return[!1,C(n)];if(e.size<t)return[!1,S(t)]}else{if(U(t)&&e.size<t)return[!1,S(t)];if(U(n)&&e.size>n)return[!1,C(n)]}return[!0,null]}function U(e){return null!=e}function I(e){var t=e.files,n=e.accept,r=e.minSize,a=e.maxSize,o=e.multiple,i=e.maxFiles;return!(!o&&t.length>1||o&&i>=1&&t.length>i)&&t.every((function(e){var t=k(F(e,n),1)[0],o=k(L(e,r,a),1)[0];return t&&o}))}function R(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function P(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function j(e){e.preventDefault()}function z(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function B(e){return-1!==e.indexOf("Edge/")}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return z(e)||B(e)}function M(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.some((function(t){return!R(e)&&t&&t.apply(void 0,[e].concat(r)),R(e)}))}}var q=["children"],K=["open"],H=["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],J=["refKey","onChange","onClick"];function G(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ee=(0,r.forwardRef)((function(e,t){var n=e.children,a=re(Q(e,q)),o=a.open,i=Q(a,K);return(0,r.useImperativeHandle)(t,(function(){return{open:o}}),[o]),r.createElement(r.Fragment,null,n(Z(Z({},i),{},{open:o})))}));ee.displayName="Dropzone";var te={disabled:!1,getFilesFromEvent:function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){return[2,(n=e,n.dataTransfer&&e.dataTransfer?f(e.dataTransfer,e.type):u(e))];var n}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null};ee.defaultProps=te;var ne={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Z(Z({},te),e),n=t.accept,a=t.disabled,o=t.getFilesFromEvent,i=t.maxSize,l=t.minSize,c=t.multiple,s=t.maxFiles,u=t.onDragEnter,f=t.onDragLeave,m=t.onDragOver,d=t.onDrop,p=t.onDropAccepted,v=t.onDropRejected,g=t.onFileDialogCancel,E=t.preventDropOnDocument,h=t.noClick,y=t.noKeyboard,b=t.noDrag,k=t.noDragEventsBubbling,w=t.validator,N=(0,r.useRef)(null),x=(0,r.useRef)(null),D=(0,r.useReducer)(ae,ne),O=Y(D,2),T=O[0],C=O[1],S=T.isFocused,U=T.isFileDialogActive,z=T.draggedFiles,B=(0,r.useCallback)((function(){x.current&&(C({type:"openDialog"}),x.current.value=null,x.current.click())}),[C]),q=function(){U&&setTimeout((function(){x.current&&(x.current.files.length||(C({type:"closeDialog"}),"function"==typeof g&&g()))}),300)};(0,r.useEffect)((function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}}),[x,U,g]);var K=(0,r.useCallback)((function(e){N.current&&N.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),B()))}),[N,x]),_=(0,r.useCallback)((function(){C({type:"focus"})}),[]),X=(0,r.useCallback)((function(){C({type:"blur"})}),[]),W=(0,r.useCallback)((function(){h||($()?setTimeout(B,0):B())}),[x,h]),ee=(0,r.useRef)([]),re=function(e){N.current&&N.current.contains(e.target)||(e.preventDefault(),ee.current=[])};(0,r.useEffect)((function(){return E&&(document.addEventListener("dragover",j,!1),document.addEventListener("drop",re,!1)),function(){E&&(document.removeEventListener("dragover",j),document.removeEventListener("drop",re))}}),[N,E]);var oe=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),me(e),ee.current=[].concat(G(ee.current),[e.target]),P(e)&&Promise.resolve(o(e)).then((function(t){R(e)&&!k||(C({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e))}))}),[o,u,k]),ie=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),me(e);var t=P(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&m&&m(e),!1}),[m,k]),le=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),me(e);var t=ee.current.filter((function(e){return N.current&&N.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),ee.current=t,t.length>0||(C({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),P(e)&&f&&f(e))}),[N,f,k]),ce=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),me(e),ee.current=[],P(e)&&Promise.resolve(o(e)).then((function(t){if(!R(e)||k){var r=[],a=[];t.forEach((function(e){var t=Y(F(e,n),2),o=t[0],c=t[1],s=Y(L(e,l,i),2),u=s[0],f=s[1],m=w?w(e):null;if(o&&u&&!m)r.push(e);else{var d=[c,f];m&&(d=d.concat(m)),a.push({file:e,errors:d.filter((function(e){return e}))})}})),(!c&&r.length>1||c&&s>=1&&r.length>s)&&(r.forEach((function(e){a.push({file:e,errors:[A]})})),r.splice(0)),C({acceptedFiles:r,fileRejections:a,type:"setFiles"}),d&&d(r,a,e),a.length>0&&v&&v(a,e),r.length>0&&p&&p(r,e)}})),C({type:"reset"})}),[c,n,l,i,s,o,d,p,v,k,w]),se=function(e){return a?null:e},ue=function(e){return y?null:se(e)},fe=function(e){return b?null:se(e)},me=function(e){k&&e.stopPropagation()},de=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onKeyDown,o=e.onFocus,i=e.onBlur,l=e.onClick,c=e.onDragEnter,s=e.onDragOver,u=e.onDragLeave,f=e.onDrop,m=Q(e,H);return Z(Z(V({onKeyDown:ue(M(r,K)),onFocus:ue(M(o,_)),onBlur:ue(M(i,X)),onClick:se(M(l,W)),onDragEnter:fe(M(c,oe)),onDragOver:fe(M(s,ie)),onDragLeave:fe(M(u,le)),onDrop:fe(M(f,ce))},n,N),a||y?{}:{tabIndex:0}),m)}}),[N,K,_,X,W,oe,ie,le,ce,y,b,a]),pe=(0,r.useCallback)((function(e){e.stopPropagation()}),[]),ve=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,a=e.onChange,o=e.onClick,i=Q(e,J),l=V({accept:n,multiple:c,type:"file",style:{display:"none"},onChange:se(M(a,ce)),onClick:se(M(o,pe)),autoComplete:"off",tabIndex:-1},r,x);return Z(Z({},l),i)}}),[x,n,c,ce,a]),ge=z.length,Ee=ge>0&&I({files:z,accept:n,minSize:l,maxSize:i,multiple:c,maxFiles:s}),he=ge>0&&!Ee;return Z(Z({},T),{},{isDragAccept:Ee,isDragReject:he,isFocused:S&&!a,getRootProps:de,getInputProps:ve,rootRef:N,inputRef:x,open:se(B)})}function ae(e,t){switch(t.type){case"focus":return Z(Z({},e),{},{isFocused:!0});case"blur":return Z(Z({},e),{},{isFocused:!1});case"openDialog":return Z(Z({},e),{},{isFileDialogActive:!0});case"closeDialog":return Z(Z({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return Z(Z({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return Z(Z({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Z({},ne);default:return e}}var oe=n(5186),ie=n(3935);function le(){return le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var ce="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,se={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},ue=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],fe=function(e,t,n,r,a){var o=a.offsetX,i=a.offsetY,l=r?8:0,c=n.split(" "),s=e.top+e.height/2,u=e.left+e.width/2,f=t.height,m=t.width,d=s-f/2,p=u-m/2,v="",g="0%",E="0%";switch(c[0]){case"top":d-=f/2+e.height/2+l,v="rotate(180deg)  translateX(50%)",g="100%",E="50%";break;case"bottom":d+=f/2+e.height/2+l,v="rotate(0deg) translateY(-100%) translateX(-50%)",E="50%";break;case"left":p-=m/2+e.width/2+l,v=" rotate(90deg)  translateY(50%) translateX(-25%)",E="100%",g="50%";break;case"right":p+=m/2+e.width/2+l,v="rotate(-90deg)  translateY(-150%) translateX(25%)",g="50%"}switch(c[1]){case"top":d=e.top,g=e.height/2+"px";break;case"bottom":d=e.top-f+e.height,g=f-e.height/2+"px";break;case"left":p=e.left,E=e.width/2+"px";break;case"right":p=e.left-m+e.width,E=m-e.width/2+"px"}return{top:d="top"===c[0]?d-i:d+i,left:p="left"===c[0]?p-o:p+o,transform:v,arrowLeft:E,arrowTop:g}},me=function(e,t,n,r,a,o){var i=a.offsetX,l=a.offsetY,c={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},s=0,u=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var n=document.querySelector(e);null!==n&&(t=n.getBoundingClientRect())}return t}(o),f=Array.isArray(n)?n:[n];for((o||Array.isArray(n))&&(f=[].concat(f,ue));s<f.length;){var m={top:(c=fe(e,t,f[s],r,{offsetX:i,offsetY:l})).top,left:c.left,width:t.width,height:t.height};if(!(m.top<=u.top||m.left<=u.left||m.top+m.height>=u.top+u.height||m.left+m.width>=u.left+u.width))break;s++}return c},de=0,pe=(0,r.forwardRef)((function(e,t){var n=e.trigger,a=void 0===n?null:n,o=e.onOpen,i=void 0===o?function(){}:o,l=e.onClose,c=void 0===l?function(){}:l,s=e.defaultOpen,u=void 0!==s&&s,f=e.open,m=void 0===f?void 0:f,d=e.disabled,p=void 0!==d&&d,v=e.nested,g=void 0!==v&&v,E=e.closeOnDocumentClick,h=void 0===E||E,y=e.repositionOnResize,b=void 0===y||y,k=e.closeOnEscape,w=void 0===k||k,N=e.on,x=void 0===N?["click"]:N,D=e.contentStyle,O=void 0===D?{}:D,T=e.arrowStyle,C=void 0===T?{}:T,S=e.overlayStyle,A=void 0===S?{}:S,F=e.className,L=void 0===F?"":F,U=e.position,I=void 0===U?"bottom center":U,R=e.modal,P=void 0!==R&&R,j=e.lockScroll,z=void 0!==j&&j,B=e.arrow,$=void 0===B||B,M=e.offsetX,q=void 0===M?0:M,K=e.offsetY,H=void 0===K?0:K,J=e.mouseEnterDelay,G=void 0===J?100:J,Y=e.mouseLeaveDelay,_=void 0===Y?100:Y,X=e.keepTooltipInside,W=void 0!==X&&X,Z=e.children,V=(0,r.useState)(m||u),Q=V[0],ee=V[1],te=(0,r.useRef)(null),ne=(0,r.useRef)(null),re=(0,r.useRef)(null),ae=(0,r.useRef)(null),oe=(0,r.useRef)("popup-"+ ++de),ue=!!P||!a,fe=(0,r.useRef)(0);ce((function(){return Q?(ae.current=document.activeElement,De(),we(),be()):ke(),function(){clearTimeout(fe.current)}}),[Q]),(0,r.useEffect)((function(){"boolean"==typeof m&&(m?pe():ve())}),[m,p]);var pe=function(e){Q||p||(ee(!0),setTimeout((function(){return i(e)}),0))},ve=function(e){var t;Q&&!p&&(ee(!1),ue&&(null===(t=ae.current)||void 0===t||t.focus()),setTimeout((function(){return c(e)}),0))},ge=function(e){null==e||e.stopPropagation(),Q?ve(e):pe(e)},Ee=function(e){clearTimeout(fe.current),fe.current=setTimeout((function(){return pe(e)}),G)},he=function(e){null==e||e.preventDefault(),ge()},ye=function(e){clearTimeout(fe.current),fe.current=setTimeout((function(){return ve(e)}),_)},be=function(){ue&&z&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},ke=function(){ue&&z&&(document.getElementsByTagName("body")[0].style.overflow="auto")},we=function(){var e,t=null==ne||null===(e=ne.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(t)[0];null==n||n.focus()};(0,r.useImperativeHandle)(t,(function(){return{open:function(){pe()},close:function(){ve()},toggle:function(){ge()}}}));var Ne,xe,De=function(){if(!ue&&Q&&(null==te?void 0:te.current)&&(null==te?void 0:te.current)&&(null==ne?void 0:ne.current)){var e,t,n=te.current.getBoundingClientRect(),r=ne.current.getBoundingClientRect(),a=me(n,r,I,$,{offsetX:q,offsetY:H},W);if(ne.current.style.top=a.top+window.scrollY+"px",ne.current.style.left=a.left+window.scrollX+"px",$&&re.current)re.current.style.transform=a.transform,re.current.style.setProperty("-ms-transform",a.transform),re.current.style.setProperty("-webkit-transform",a.transform),re.current.style.top=(null===(e=C.top)||void 0===e?void 0:e.toString())||a.arrowTop,re.current.style.left=(null===(t=C.left)||void 0===t?void 0:t.toString())||a.arrowLeft}};Ne=ve,void 0===(xe=w)&&(xe=!0),(0,r.useEffect)((function(){if(xe){var e=function(e){"Escape"===e.key&&Ne(e)};return document.addEventListener("keyup",e),function(){xe&&document.removeEventListener("keyup",e)}}}),[Ne,xe]),function(e,t){void 0===t&&(t=!0),(0,r.useEffect)((function(){if(t){var n=function(t){if(9===t.keyCode){var n,r=null==e||null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),a=Array.prototype.slice.call(r);if(1===a.length)return void t.preventDefault();var o=a[0],i=a[a.length-1];t.shiftKey&&document.activeElement===o?(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),o.focus())}};return document.addEventListener("keydown",n),function(){t&&document.removeEventListener("keydown",n)}}}),[e,t])}(ne,Q&&ue),function(e,t){void 0===t&&(t=!0),(0,r.useEffect)((function(){if(t){var n=function(){e()};return window.addEventListener("resize",n),function(){t&&window.removeEventListener("resize",n)}}}),[e,t])}(De,b),function(e,t,n){void 0===n&&(n=!0),(0,r.useEffect)((function(){if(n){var r=function(n){var r=Array.isArray(e)?e:[e],a=!1;r.forEach((function(e){e.current&&!e.current.contains(n.target)||(a=!0)})),n.stopPropagation(),a||t(n)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){n&&(document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r))}}}),[e,t,n])}(a?[ne,te]:[ne],ve,h&&!g);var Oe,Te=function(){return r.createElement("div",Object.assign({},(e=ue?se.popupContent.modal:se.popupContent.tooltip,t={className:"popup-content "+(""!==L?L.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:le({},e,O,{pointerEvents:"auto"}),ref:ne,onClick:function(e){e.stopPropagation()}},!P&&x.indexOf("hover")>=0&&(t.onMouseEnter=Ee,t.onMouseLeave=ye),t),{key:"C",role:ue?"dialog":"tooltip",id:oe.current}),$&&!ue&&r.createElement("div",{ref:re,style:se.popupArrow},r.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==L?L.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:le({position:"absolute"},C)},r.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),Z&&"function"==typeof Z?Z(ve,Q):Z);var e,t},Ce=!(x.indexOf("hover")>=0),Se=ue?se.overlay.modal:se.overlay.tooltip,Ae=[Ce&&r.createElement("div",{key:"O","data-testid":"overlay","data-popup":ue?"modal":"tooltip",className:"popup-overlay "+(""!==L?L.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:le({},Se,A,{pointerEvents:h&&g||ue?"auto":"none"}),onClick:h&&g?ve:void 0,tabIndex:-1},ue&&Te()),!ue&&Te()];return r.createElement(r.Fragment,null,function(){for(var e={key:"T",ref:te,"aria-describedby":oe.current},t=Array.isArray(x)?x:[x],n=0,o=t.length;n<o;n++)switch(t[n]){case"click":e.onClick=ge;break;case"right-click":e.onContextMenu=he;break;case"hover":e.onMouseEnter=Ee,e.onMouseLeave=ye;break;case"focus":e.onFocus=Ee,e.onBlur=ye}if("function"==typeof a){var i=a(Q);return!!a&&r.cloneElement(i,e)}return!!a&&r.cloneElement(a,e)}(),Q&&ie.createPortal(Ae,(null===(Oe=document.getElementById("popup-root"))&&((Oe=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(Oe)),Oe)))})),ve=n(8664),ge=n(4050),Ee=n(8385),he=n(3046),ye=n(1874),be=n(376);const ke=["file","url","text"];function we({onAdd:e,accept:t}){const n=(0,Ee.ql)(Te),[a,o]=(0,r.useState)("file"),i=(0,r.useRef)(null),l=(0,r.useCallback)((e=>{var t;o(e),null===(t=i.current)||void 0===t||t.open()}),[i,o]),c=(0,r.useCallback)((()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.close()}),[i]),s=(0,r.useCallback)((async t=>{e(t)}),[e]),u=(0,r.useCallback)((e=>{s(e.map(ge.DJ.fromFile)).then((()=>{c()}))}),[s,c]);(0,r.useEffect)((()=>{const e=function(){const e=function(){switch(location.hash){case"#file":return"file";case"#url":return"url";case"#text":return"text";default:return}}();e&&(location.hash="");return e}();e&&l(e)}),[l]);const[f,m]=(0,ve.Dl)(u,{multiple:!0,accept:t}),d={file:e=>r.createElement(Ne,{close:e,openFiles:f}),url:e=>r.createElement(xe,{close:e,submit:s}),text:e=>r.createElement(De,{close:e,submit:s})};return r.createElement("span",{className:"AddItem"},r.createElement("button",{className:`${ye.E.BUTTON} green big-plus`,onClick:()=>l(a)},r.createElement(be.JO,{kind:"add-line"})),r.createElement("span",{className:"group"},r.createElement("span",{className:ye.E.BUTTON_GROUP},r.createElement("button",{className:`${ye.E.BUTTON} green`,onClick:f},r.createElement(be.fd,{kind:"file"}),r.createElement("span",{className:"text"},n.file)),r.createElement("button",{className:`${ye.E.BUTTON} green`,onClick:()=>l("url")},r.createElement(be.fd,{kind:"url"}),r.createElement("span",{className:"text"},n.url)),r.createElement("button",{className:`${ye.E.BUTTON} green`,onClick:()=>l("text")},r.createElement(be.fd,{kind:"text"}),r.createElement("span",{className:"text"},n.text)))),m,r.createElement(pe,{ref:i,modal:!0,closeOnDocumentClick:!0,closeOnEscape:!0,className:"AddItemModal"},(e=>r.createElement("div",{className:"modal"},r.createElement("div",{className:"tabs"},ke.map((e=>r.createElement("button",{key:e,className:"tab"+(a===e?" active":""),onClick:()=>o(e)},r.createElement(be.fd,{kind:e}),r.createElement("span",{className:"long"},n[`modal-tab-${e}-long`]),r.createElement("span",{className:"short"},n[`modal-tab-${e}-short`])))),r.createElement("button",{className:"close",onClick:e},r.createElement(be.JO,{kind:"close-line"}))),d[a](e)))))}function Ne({close:e,openFiles:t}){const n=(0,Ee.ql)(Te);return r.createElement(r.Fragment,null,r.createElement("div",{className:"modal-content"},r.createElement("label",null,n.file),r.createElement("button",{className:ye.E.BUTTON,onClick:t},n.chooseFiles),r.createElement("p",{className:"hint"},n.dragAndDropHint)),r.createElement(Oe,{close:e,add:t}))}function xe({close:e,submit:t}){const n=(0,Ee.ql)(Te),[a,o]=(0,r.useState)(""),[i,l]=(0,r.useState)("");function c(){/^\s*$/.test(a)?l(n.emptyUrlError):(0,he.jv)(a)?(l(""),t([ge.DJ.fromUrl(a)]).then((()=>{o(""),e()}))):l(n.invalidUrlError)}return r.createElement(r.Fragment,null,r.createElement("div",{className:"modal-content"},r.createElement("label",{htmlFor:"urlInput"},n.url),r.createElement("input",{id:"urlInput",type:"url",value:a,placeholder:"https://",autoFocus:!0,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"===e.key&&c()},spellCheck:!1}),!!i&&r.createElement("p",{className:"error"},i)),r.createElement(Oe,{close:e,add:c}))}function De({close:e,submit:t}){const n=(0,Ee.ql)(Te),[a,o]=(0,r.useState)(""),[i,l]=(0,r.useState)("");return r.createElement(r.Fragment,null,r.createElement("div",{className:"modal-content"},r.createElement("label",{htmlFor:"textInput"},n.text),r.createElement("textarea",{id:"textInput",value:a,autoFocus:!0,onChange:e=>o(e.target.value),spellCheck:!1}),!!i&&r.createElement("p",{className:"error"},i)),r.createElement(Oe,{close:e,add:function(){/^\s*$/.test(a)?l(n.emptyTextError):(l(""),t([ge.DJ.fromText(a)]).then((()=>{o(""),e()})))}}))}function Oe({close:e,add:t}){const n=(0,Ee.ql)(Te);return r.createElement("div",{className:"ModalFooter"},r.createElement("button",{className:`${ye.E.BUTTON}`,onClick:e},n.cancel),!!t&&r.createElement("button",{className:`${ye.E.BUTTON} ${ye.E.GREEN}`,onClick:t},r.createElement(be.JO,{kind:"add-line"}),n.add))}const Te={en:{file:"Files",url:"URL",text:"Text","modal-tab-file-long":"Upload files","modal-tab-url-long":"Submit URL","modal-tab-text-long":"Paste text","modal-tab-file-short":"Files","modal-tab-url-short":"URL","modal-tab-text-short":"Text",cancel:"Cancel",add:"Add",chooseFiles:"Choose files",dragAndDropHint:"Hint: You can also drag and drop files into this window to upload them.",emptyTextError:"No text provided. Please paste some text.",emptyUrlError:"No URL provided. Please enter a URL.",invalidUrlError:"Invalid URL. Please enter a valid URL."},de:{file:"Dateien",url:"URL",text:"Text","modal-tab-file-long":"Dateien hochladen","modal-tab-url-long":"URL eingeben","modal-tab-text-long":"Text einfügen","modal-tab-file-short":"Dateien","modal-tab-url-short":"URL","modal-tab-text-short":"Text",cancel:"Abbrechen",add:"Hinzufügen",chooseFiles:"Dateien auswählen",dragAndDropHint:"Hinweis: Sie können Dateien auch in dieses Fenster ziehen, um sie hochzuladen.",emptyTextError:"Kein Text. Bitte fügen Sie Text ein.",emptyUrlError:"Keine URL. Bitte geben Sie eine URL ein.",invalidUrlError:"Ungültige URL. Bitte Sie geben eine gültige URL ein."}};function Ce(){return Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(this,arguments)}function Se(e){const[t,n]=(0,r.useState)(!1),a=(0,r.useCallback)((()=>n((e=>!e))),[n]);return r.createElement("div",{className:"EditInput"},t?r.createElement(Ae,Ce({},e,{toggleIsEditing:a})):r.createElement(Fe,{text:e.text,toggleIsEditing:a}))}function Ae(e){const[t,n]=(0,r.useState)(e.text),[a,o]=(0,r.useState)(),i=(0,r.useRef)(null),l=t=>{if(e.validate){const r=e.validate(t);if(r)return o(r),null===(n=i.current)||void 0===n||n.open(),!1}var n,r;return a&&(o(void 0),null===(r=i.current)||void 0===r||r.close()),!0},c=()=>{l(t)&&(e.toggleIsEditing(),e.onSubmit(t))};return r.createElement("div",{className:`EditView ${ye.E.BUTTON_GROUP}`},r.createElement(pe,{position:"top center",ref:i,className:"error-popup",on:[],trigger:r.createElement("input",{className:`${ye.E.NON_BUTTON} ${ye.E.SMALL}${a?" error":""}`,autoFocus:!0,type:"text",value:t,onChange:e=>{n(e.target.value),a&&l(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&c()},onKeyUp:t=>{"Escape"===t.key&&e.toggleIsEditing()}})},r.createElement("span",null,null!=a?a:"")),r.createElement("button",{className:`accept ${ye.E.BUTTON} ${ye.E.SMALL}`,onClick:c},r.createElement(be.JO,{kind:"check-line"})),r.createElement("button",{className:`cancel ${ye.E.BUTTON} ${ye.E.SMALL}`,onClick:e.toggleIsEditing},r.createElement(be.JO,{kind:"close-line"})))}function Fe({text:e,toggleIsEditing:t}){return r.createElement("div",{className:"TextView"},r.createElement("span",{className:"text"},r.createElement("span",null,e.replace(/[\r\n]+/g," "))),t&&r.createElement("button",{className:`edit ${ye.E.BUTTON} ${ye.E.SMALL}`,onClick:t},r.createElement(be.fd,{kind:"rename"})))}var Le=n(5572),Ue=n(4371),Ie=n(8807),Re=n(2440),Pe=n(7653),je=n(5755);function ze({session:e,uploading:t,failed:n,removeFailed:a,update:o}){const i=(0,r.useContext)(Ee.dn),l=(0,Ee.ql)($e),c=(0,Pe.a$)(e.itemsList).reverse();const s=(0,r.useCallback)((e=>!!/^\s*$/.test(e)&&l.emptyItemName),[l]);return r.createElement("table",{className:"ItemTable"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"name",colSpan:2},l.file),r.createElement("th",{className:"size"},l.size),r.createElement("th",{className:"action"}))),r.createElement("tbody",null,[...n].sort(((e,t)=>(0,Pe.pv)(e.startTimestamp,t.startTimestamp))).map((({item:e,uploadId:t},n)=>r.createElement("tr",{key:t,className:"failed-item"+(0===n?" first":"")},r.createElement("td",{className:"icon"},r.createElement(be.fd,{kind:"failed"})),r.createElement("td",{className:"name"},r.createElement(Fe,{text:e.name})),r.createElement("td",{className:"size"},r.createElement("span",{className:"size"},Be(e.size,i))),r.createElement("td",{className:"action"},r.createElement("button",{className:`delete ${ye.E.BUTTON} ${ye.E.SMALL} ${ye.E.RED}`,onClick:()=>a(t)},r.createElement(be.fd,{kind:"delete"}),r.createElement("span",{className:"text"},l.delete)))))),[...t].sort(((e,t)=>-(0,Pe.pv)(e.startTimestamp,t.startTimestamp))).map((({item:e,uploadId:t},n)=>r.createElement("tr",{key:t,className:"uploading-item"+(0===n?" first":"")},r.createElement("td",{className:"icon"},r.createElement(je.T,null)),r.createElement("td",{className:"name"},r.createElement(Fe,{text:e.name})),r.createElement("td",{className:"size"},r.createElement("span",{className:"size"},Be(e.size,i))),r.createElement("td",{className:"action"})))),c.map(((t,n)=>{var a,c,u,f,m,d,p;return r.createElement("tr",{key:t.urn,className:"session-item"+(0===n?" first":"")},r.createElement("td",{className:"icon"},r.createElement(be.wy,{type:null!==(a=null===(c=t.resource)||void 0===c?void 0:c.type)&&void 0!==a?a:Le.Item.Resource.Type.TYPE_UNSPECIFIED})),r.createElement("td",{className:"name"},r.createElement(Se,{text:null!==(u=null===(f=t.meta)||void 0===f?void 0:f.name)&&void 0!==u?u:"",onSubmit:n=>function(t,n){var r;if(n=n.replace(/\s+/g," ").trim(),(null===(r=t.meta)||void 0===r?void 0:r.name)===n)return;const a=new Le.Item.Metadata;a.setName(n);const{mutate:i,request:l}=(0,Ie.jD)(e,t.urn,a);o((0,Re.M)().updateItem(l,null).then(he.ZT,(e=>{console.log(e)})),i)}(t,n),validate:s})),r.createElement("td",{className:"size"},r.createElement("span",{className:"size"},Be(null!==(m=null===(d=t.resource)||void 0===d||null===(p=d.rawProperties)||void 0===p?void 0:p.size)&&void 0!==m?m:0,i))),r.createElement("td",{className:"action"},r.createElement("button",{className:`delete ${ye.E.BUTTON} ${ye.E.SMALL} ${ye.E.RED}`,onClick:()=>function(t){const{mutate:n,request:r}=(0,Ie.PT)(e,t.urn);o((0,Re.M)().deleteItem(r,null).then(he.ZT,(e=>{console.log(e)})),n)}(t)},r.createElement(be.fd,{kind:"delete"}),r.createElement("span",{className:"text"},l.delete))))})),0===c.length&&0===t.length&&0===n.length&&r.createElement("tr",null,r.createElement("td",{className:"empty",colSpan:4},r.createElement("em",null,l.emptyItemList)))))}function Be(e,t){let n;e<100?n="byte":e<1e6?(n="kilobyte",e/=1e3):(n="megabyte",e/=1e6);return new Intl.NumberFormat((0,Ue.ME)(t),{maximumSignificantDigits:2,style:"unit",unit:n}).format(e)}const $e={en:{emptyItemList:"Empty",file:"File",size:"Size",delete:"Delete",emptyItemName:"The file name cannot be empty."},de:{emptyItemList:"Leer",file:"Datei",size:"Größe",delete:"Löschen",emptyItemName:"Der Name kann nicht leer sein."}};var Me=n(9539),qe=n(1277),Ke=n(9528),He=n(2974),Je=n(2639),Ge=n(5795),Ye=n(5009),_e=n(3124);function Xe(){return r.createElement(r.Fragment,null,(0,ve.D8)((()=>r.createElement(Ze,null))),r.createElement(Ke.s,null),r.createElement(oe.q,null,r.createElement("title",null,"Picapica")))}const We=[".pdf","application/pdf",".doc",".docx","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].join(",");function Ze(){var e;const t=(0,Ee.ql)(Qe),[n,a]=(0,Ye.K6)(),[o,i]=(0,r.useState)([]),l=(0,r.useCallback)((e=>i((t=>[...t,e]))),[i]),c=(0,r.useCallback)((e=>i((t=>t.filter((t=>t.uploadId!==e))))),[i]),s=(0,r.useCallback)((e=>{a(Promise.resolve(),function({item:e,itemUrn:t}){return n=>{const r=(0,Pe.R3)(n),a=Date.now()/1e3,o=Math.floor(a),i={nanos:1e10*(a-o),seconds:o};return r.itemsList.push({urn:t,createdAt:i,modifiedAt:i,meta:{name:e.name},resource:{itemUrn:t,type:(0,ge.J6)(e.type),status:Le.Item.Resource.ProcessingStatus.STATUS_RUNNING,rawProperties:{checksum:"fake",size:e.size},textProperties:{checksum:"fake",length:0}}}),r.comparisonsList.push({urnA:t,urnB:r.urn}),r}}(e))}),[a]),[u,f]=function(e,t){const[n,a]=(0,r.useState)([]),[o,i]=(0,r.useState)([]),l=(0,r.useCallback)((e=>{i((t=>[...t,e])),a((t=>t.filter((t=>t.uploadId!==e.item.uploadId))))}),[a,i]),c=(0,r.useCallback)(((e,t)=>{if(0===e.length)return;const n=e.map((e=>{const n={uploadId:(0,_e.Z)(),item:e.getMeta(),startTimestamp:(0,Pe.VN)()};return e.read().then((async e=>{const n=e.getRequest(t);return n.addComparisonUrns(t),(await(0,Re.M)().createItem(n,null)).getItemUrn()})).then((e=>l({item:n,result:{type:"Ok",value:e}})),(e=>l({item:n,result:{type:"Error",error:e}}))),n}));a((e=>[...e,...n]))}),[a,l]);return(0,r.useEffect)((()=>{if(o.length>0){for(const{item:n,result:r}of o)"Ok"===r.type?e({...n,itemUrn:r.value}):t({...n,error:r.error});i([])}}),[o,i,e,t]),[n,c]}(s,l),m=(0,r.useCallback)((()=>!("Ready"===n.type&&n.session.itemsList.length>0)&&0===u.length&&0===o.length),[n,o,u]),[d,p]=(0,r.useState)(!0);(0,r.useEffect)((()=>{m()||p(!1)}),[m,p]);const v=(0,Ye.PK)(n),g=(0,r.useCallback)((e=>{v&&f(e.map(ge.DJ.fromFile),v)}),[v,f]),E=re({accept:We,multiple:!0,disabled:"Ready"!==n.type,onDrop:g,noClick:!0});return r.createElement(Me.T,{className:"Submit",header:"small",dropState:E},r.createElement(Ge.n0,{sessionUrn:null!==(e=(0,Ye.PK)(n))&&void 0!==e?e:"",current:"submit",disableOthers:"Ready"!==n.type||0===n.session.itemsList.length},r.createElement(qe.sM,{state:n,onReady:({session:e})=>{const n=r.createElement(we,{onAdd:t=>f(t,e.urn),accept:We});return r.createElement(r.Fragment,null,r.createElement("button",{onClick:()=>f([ge.DJ.fromText(Ve())],e.urn),style:{position:"absolute",opacity:".3",zIndex:1e3}},"Random Text"),m()&&d?r.createElement(r.Fragment,null,r.createElement("div",{className:"blank-session"},n,r.createElement("div",{className:"spacer"}),r.createElement("span",{className:"pseudo-tooltip"},t.addItemHint))):r.createElement(r.Fragment,null,r.createElement(He.C,{left:n,right:r.createElement(Je.aW,{to:(0,Ge.Px)("analysis",e.urn)}),instruction:t.instruction}),r.createElement(ze,{session:e,uploading:u,failed:o,removeFailed:c,update:a})))}})))}function Ve(){const e=10**(6.5*Math.random());let t=String.fromCodePoint(65+Math.floor(26*Math.random())),n=!1;for(let r=0;r<e;r++)!n&&Math.random()<.01?(t+="\n",n=!0):!n&&Math.random()<1/4?(t+=" ",n=!0):(t+=String.fromCodePoint(65+Math.floor(26*Math.random())),n=!1);return t}const Qe={en:{instruction:"Add more files, or proceed",addItemHint:"Click here to upload documents."},de:{instruction:"Es können weitere Dateien hinzugefügt werden",addItemHint:"Hier klicken, um Dokumente hochzuladen."}}}}]);
//# sourceMappingURL=component---src-pages-submit-tsx-70284517580807b39d64.js.map